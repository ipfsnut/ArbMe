var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let n=class extends Error{constructor(e,n={}){super(e,n.cause?{cause:n.cause}:void 0),t(this,"name","BaseError"),t(this,"cause"),this.cause=n.cause}};class r extends n{constructor(){super("Invalid domain manifest"),t(this,"name","AddMiniApp.InvalidDomainManifest")}}let i=class extends n{constructor(){super("Add miniapp rejected by user"),t(this,"name","AddMiniApp.RejectedByUser")}},s=class extends n{constructor(){super("Sign in rejected by user"),t(this,"name","SignIn.RejectedByUser")}};class o extends n{constructor(){super("Sign manifest rejected by user"),t(this,"name","SignManifest.RejectedByUser")}}class a extends n{constructor(){super("Invalid domain provided"),t(this,"name","SignManifest.InvalidDomain")}}class u extends n{constructor(e="Manifest signing failed"){super(e),t(this,"name","SignManifest.GenericError")}}var c,l,d;(l=c||(c={})).assertEqual=e=>{},l.assertIs=function(e){},l.assertNever=function(e){throw new Error},l.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},l.getValidEnumValues=e=>{const t=l.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(const r of t)n[r]=e[r];return l.objectValues(n)},l.objectValues=e=>l.objectKeys(e).map(function(t){return e[t]}),l.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},l.find=(e,t)=>{for(const n of e)if(t(n))return n},l.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,l.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},l.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(d||(d={})).mergeShapes=(e,t)=>({...e,...t});const h=c.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),f=e=>{switch(typeof e){case"undefined":return h.undefined;case"string":return h.string;case"number":return Number.isNaN(e)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"symbol":return h.symbol;case"object":return Array.isArray(e)?h.array:null===e?h.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?h.promise:"undefined"!=typeof Map&&e instanceof Map?h.map:"undefined"!=typeof Set&&e instanceof Set?h.set:"undefined"!=typeof Date&&e instanceof Date?h.date:h.object;default:return h.unknown}},p=c.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class m extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof m))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,c.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}m.create=e=>new m(e);const g=(e,t)=>{let n;switch(e.code){case p.invalid_type:n=e.received===h.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case p.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,c.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:n=`Unrecognized key(s) in object: ${c.joinValues(e.keys,", ")}`;break;case p.invalid_union:n="Invalid input";break;case p.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${c.joinValues(e.options)}`;break;case p.invalid_enum_value:n=`Invalid enum value. Expected ${c.joinValues(e.options)}, received '${e.received}'`;break;case p.invalid_arguments:n="Invalid function arguments";break;case p.invalid_return_type:n="Invalid function return type";break;case p.invalid_date:n="Invalid date";break;case p.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:c.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case p.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case p.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case p.custom:n="Invalid input";break;case p.invalid_intersection_types:n="Intersection results could not be merged";break;case p.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case p.not_finite:n="Number must be finite";break;default:n=t.defaultError,c.assertNever(e)}return{message:n}};let y=g;function v(e,t){const n=y,r=(e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],o={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let a="";const u=r.filter(e=>!!e).slice().reverse();for(const c of u)a=c(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===g?void 0:g].filter(e=>!!e)});e.common.issues.push(r)}class w{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return b;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return w.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return b;if("aborted"===i.status)return b;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const b=Object.freeze({status:"aborted"}),_=e=>({status:"dirty",value:e}),x=e=>({status:"valid",value:e}),E=e=>"aborted"===e.status,k=e=>"dirty"===e.status,A=e=>"valid"===e.status,S=e=>"undefined"!=typeof Promise&&e instanceof Promise;var M,I;(I=M||(M={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},I.toString=e=>"string"==typeof e?e:e?.message;class B{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const O=(e,t)=>{if(A(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new m(e.common.issues);return this._error=t,this._error}}};function R(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{const{message:s}=e;return"invalid_enum_value"===t.code?{message:s??i.defaultError}:void 0===i.data?{message:s??r??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:s??n??i.defaultError}},description:i}}class T{get description(){return this._def.description}_getType(e){return f(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:f(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new w,ctx:{common:e.parent.common,data:e.data,parsedType:f(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(S(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:f(e)},r=this._parseSync({data:e,path:n.path,parent:n});return O(n,r)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:f(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return A(n)?{value:n.value}:{issues:t.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>A(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:f(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(S(r)?r:Promise.resolve(r));return O(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{const i=e(t),s=()=>r.addIssue({code:p.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new Te({schema:this,typeName:Fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Le.create(this,this._def)}nullable(){return Pe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return me.create(this)}promise(){return Re.create(this,this._def)}or(e){return ve.create([this,e],this._def)}and(e){return xe.create(this,e,this._def)}transform(e){return new Te({...R(this._def),schema:this,typeName:Fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ue({...R(this._def),innerType:this,defaultValue:t,typeName:Fe.ZodDefault})}brand(){return new je({typeName:Fe.ZodBranded,type:this,...R(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Ce({...R(this._def),innerType:this,catchValue:t,typeName:Fe.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ze.create(this,e)}readonly(){return $e.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const L=/^c[^\s-]{8,}$/i,P=/^[0-9a-z]+$/,U=/^[0-9A-HJKMNP-TV-Z]{26}$/i,C=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,N=/^[a-z0-9_-]{21}$/i,j=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,z=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let F;const D=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,q=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,K=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,V=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,W=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,H="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",J=new RegExp(`^${H}$`);function G(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Y(e){return new RegExp(`^${G(e)}$`)}function X(e){let t=`${H}T${G(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Q(e,t){return!("v4"!==t&&t||!D.test(e))||!("v6"!==t&&t||!q.test(e))}function ee(e,t){if(!j.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return"object"==typeof i&&null!==i&&((!("typ"in i)||"JWT"===i?.typ)&&(!!i.alg&&(!t||i.alg===t)))}catch{return!1}}function te(e,t){return!("v4"!==t&&t||!Z.test(e))||!("v6"!==t&&t||!K.test(e))}class ne extends T{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==h.string){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.string,received:t.parsedType}),b}const t=new w;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const i=e.data.length>r.value,s=e.data.length<r.value;(i||s)&&(n=this._getOrReturnCtx(e,n),i?v(n,{code:p.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):s&&v(n,{code:p.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)$.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"email",code:p.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)F||(F=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),F.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"emoji",code:p.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)C.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"uuid",code:p.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)N.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"nanoid",code:p.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)L.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"cuid",code:p.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)P.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"cuid2",code:p.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)U.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"ulid",code:p.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),v(n,{validation:"url",code:p.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"regex",code:p.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){X(r).test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){J.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){Y(r).test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{code:p.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?z.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"duration",code:p.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?Q(e.data,r.version)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"ip",code:p.invalid_string,message:r.message}),t.dirty()):"jwt"===r.kind?ee(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"jwt",code:p.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?te(e.data,r.version)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"cidr",code:p.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?V.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"base64",code:p.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?W.test(e.data)||(n=this._getOrReturnCtx(e,n),v(n,{validation:"base64url",code:p.invalid_string,message:r.message}),t.dirty()):c.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:p.invalid_string,...M.errToObj(n)})}_addCheck(e){return new ne({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...M.errToObj(e)})}url(e){return this._addCheck({kind:"url",...M.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...M.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...M.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...M.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...M.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...M.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...M.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...M.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...M.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...M.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...M.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...M.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...M.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...M.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...M.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...M.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...M.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...M.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...M.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...M.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...M.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...M.errToObj(t)})}nonempty(e){return this.min(1,M.errToObj(e))}trim(){return new ne({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ne({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ne({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function re(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}ne.create=e=>new ne({checks:[],typeName:Fe.ZodString,coerce:e?.coerce??!1,...R(e)});class ie extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==h.number){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.number,received:t.parsedType}),b}let t;const n=new w;for(const r of this._def.checks)if("int"===r.kind)c.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),v(t,{code:p.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),v(t,{code:p.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),v(t,{code:p.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==re(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),v(t,{code:p.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),v(t,{code:p.not_finite,message:r.message}),n.dirty()):c.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,M.toString(t))}gt(e,t){return this.setLimit("min",e,!1,M.toString(t))}lte(e,t){return this.setLimit("max",e,!0,M.toString(t))}lt(e,t){return this.setLimit("max",e,!1,M.toString(t))}setLimit(e,t,n,r){return new ie({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:M.toString(r)}]})}_addCheck(e){return new ie({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:M.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:M.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:M.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:M.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:M.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&c.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ie.create=e=>new ie({checks:[],typeName:Fe.ZodNumber,coerce:e?.coerce||!1,...R(e)});class se extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==h.bigint)return this._getInvalidInput(e);let t;const n=new w;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),v(t,{code:p.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),v(t,{code:p.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),v(t,{code:p.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):c.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.bigint,received:t.parsedType}),b}gte(e,t){return this.setLimit("min",e,!0,M.toString(t))}gt(e,t){return this.setLimit("min",e,!1,M.toString(t))}lte(e,t){return this.setLimit("max",e,!0,M.toString(t))}lt(e,t){return this.setLimit("max",e,!1,M.toString(t))}setLimit(e,t,n,r){return new se({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:M.toString(r)}]})}_addCheck(e){return new se({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:M.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}se.create=e=>new se({checks:[],typeName:Fe.ZodBigInt,coerce:e?.coerce??!1,...R(e)});class oe extends T{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==h.boolean){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.boolean,received:t.parsedType}),b}return x(e.data)}}oe.create=e=>new oe({typeName:Fe.ZodBoolean,coerce:e?.coerce||!1,...R(e)});class ae extends T{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==h.date){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.date,received:t.parsedType}),b}if(Number.isNaN(e.data.getTime())){return v(this._getOrReturnCtx(e),{code:p.invalid_date}),b}const t=new w;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),v(n,{code:p.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):c.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:M.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:M.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ae.create=e=>new ae({checks:[],coerce:e?.coerce||!1,typeName:Fe.ZodDate,...R(e)});class ue extends T{_parse(e){if(this._getType(e)!==h.symbol){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.symbol,received:t.parsedType}),b}return x(e.data)}}ue.create=e=>new ue({typeName:Fe.ZodSymbol,...R(e)});class ce extends T{_parse(e){if(this._getType(e)!==h.undefined){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.undefined,received:t.parsedType}),b}return x(e.data)}}ce.create=e=>new ce({typeName:Fe.ZodUndefined,...R(e)});class le extends T{_parse(e){if(this._getType(e)!==h.null){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.null,received:t.parsedType}),b}return x(e.data)}}le.create=e=>new le({typeName:Fe.ZodNull,...R(e)});class de extends T{constructor(){super(...arguments),this._any=!0}_parse(e){return x(e.data)}}de.create=e=>new de({typeName:Fe.ZodAny,...R(e)});class he extends T{constructor(){super(...arguments),this._unknown=!0}_parse(e){return x(e.data)}}he.create=e=>new he({typeName:Fe.ZodUnknown,...R(e)});class fe extends T{_parse(e){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.never,received:t.parsedType}),b}}fe.create=e=>new fe({typeName:Fe.ZodNever,...R(e)});class pe extends T{_parse(e){if(this._getType(e)!==h.undefined){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.void,received:t.parsedType}),b}return x(e.data)}}pe.create=e=>new pe({typeName:Fe.ZodVoid,...R(e)});class me extends T{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==h.array)return v(t,{code:p.invalid_type,expected:h.array,received:t.parsedType}),b;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(v(t,{code:e?p.too_big:p.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(v(t,{code:p.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(v(t,{code:p.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new B(t,e,t.path,n)))).then(e=>w.mergeArray(n,e));const i=[...t.data].map((e,n)=>r.type._parseSync(new B(t,e,t.path,n)));return w.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new me({...this._def,minLength:{value:e,message:M.toString(t)}})}max(e,t){return new me({...this._def,maxLength:{value:e,message:M.toString(t)}})}length(e,t){return new me({...this._def,exactLength:{value:e,message:M.toString(t)}})}nonempty(e){return this.min(1,e)}}function ge(e){if(e instanceof ye){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Le.create(ge(r))}return new ye({...e._def,shape:()=>t})}return e instanceof me?new me({...e._def,type:ge(e.element)}):e instanceof Le?Le.create(ge(e.unwrap())):e instanceof Pe?Pe.create(ge(e.unwrap())):e instanceof Ee?Ee.create(e.items.map(e=>ge(e))):e}me.create=(e,t)=>new me({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Fe.ZodArray,...R(t)});class ye extends T{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=c.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==h.object){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.object,received:t.parsedType}),b}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof fe&&"strip"===this._def.unknownKeys))for(const a in n.data)i.includes(a)||s.push(a);const o=[];for(const a of i){const e=r[a],t=n.data[a];o.push({key:{status:"valid",value:a},value:e._parse(new B(n,t,n.path,a)),alwaysSet:a in n.data})}if(this._def.catchall instanceof fe){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)o.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)s.length>0&&(v(n,{code:p.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const r=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new B(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of o){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>w.mergeObjectSync(t,e)):w.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return M.errToObj,new ye({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{const r=this._def.errorMap?.(t,n).message??n.defaultError;return"unrecognized_keys"===t.code?{message:M.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new ye({...this._def,unknownKeys:"strip"})}passthrough(){return new ye({...this._def,unknownKeys:"passthrough"})}extend(e){return new ye({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ye({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Fe.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ye({...this._def,catchall:e})}pick(e){const t={};for(const n of c.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new ye({...this._def,shape:()=>t})}omit(e){const t={};for(const n of c.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new ye({...this._def,shape:()=>t})}deepPartial(){return ge(this)}partial(e){const t={};for(const n of c.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new ye({...this._def,shape:()=>t})}required(e){const t={};for(const n of c.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Le;)e=e._def.innerType;t[n]=e}return new ye({...this._def,shape:()=>t})}keyof(){return Ie(c.objectKeys(this.shape))}}ye.create=(e,t)=>new ye({shape:()=>e,unknownKeys:"strip",catchall:fe.create(),typeName:Fe.ZodObject,...R(t)}),ye.strictCreate=(e,t)=>new ye({shape:()=>e,unknownKeys:"strict",catchall:fe.create(),typeName:Fe.ZodObject,...R(t)}),ye.lazycreate=(e,t)=>new ye({shape:e,unknownKeys:"strip",catchall:fe.create(),typeName:Fe.ZodObject,...R(t)});class ve extends T{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map(e=>new m(e.ctx.common.issues));return v(t,{code:p.invalid_union,unionErrors:n}),b});{let e;const r=[];for(const s of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map(e=>new m(e));return v(t,{code:p.invalid_union,unionErrors:i}),b}}get options(){return this._def.options}}ve.create=(e,t)=>new ve({options:e,typeName:Fe.ZodUnion,...R(t)});const we=e=>e instanceof Se?we(e.schema):e instanceof Te?we(e.innerType()):e instanceof Me?[e.value]:e instanceof Be?e.options:e instanceof Oe?c.objectValues(e.enum):e instanceof Ue?we(e._def.innerType):e instanceof ce?[void 0]:e instanceof le?[null]:e instanceof Le?[void 0,...we(e.unwrap())]:e instanceof Pe?[null,...we(e.unwrap())]:e instanceof je||e instanceof $e?we(e.unwrap()):e instanceof Ce?we(e._def.innerType):[];class be extends T{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.object)return v(t,{code:p.invalid_type,expected:h.object,received:t.parsedType}),b;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(v(t,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),b)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const i of t){const t=we(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(r.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);r.set(n,i)}}return new be({typeName:Fe.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...R(n)})}}function _e(e,t){const n=f(e),r=f(t);if(e===t)return{valid:!0,data:e};if(n===h.object&&r===h.object){const n=c.objectKeys(t),r=c.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i={...e,...t};for(const s of r){const n=_e(e[s],t[s]);if(!n.valid)return{valid:!1};i[s]=n.data}return{valid:!0,data:i}}if(n===h.array&&r===h.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=_e(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===h.date&&r===h.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class xe extends T{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(E(e)||E(r))return b;const i=_e(e.value,r.value);return i.valid?((k(e)||k(r))&&t.dirty(),{status:t.value,value:i.data}):(v(n,{code:p.invalid_intersection_types}),b)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}xe.create=(e,t,n)=>new xe({left:e,right:t,typeName:Fe.ZodIntersection,...R(n)});class Ee extends T{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.array)return v(n,{code:p.invalid_type,expected:h.array,received:n.parsedType}),b;if(n.data.length<this._def.items.length)return v(n,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b;!this._def.rest&&n.data.length>this._def.items.length&&(v(n,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new B(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>w.mergeArray(t,e)):w.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Ee({...this._def,rest:e})}}Ee.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ee({items:e,typeName:Fe.ZodTuple,rest:null,...R(t)})};class ke extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.map)return v(n,{code:p.invalid_type,expected:h.map,received:n.parsedType}),b;const r=this._def.keyType,i=this._def.valueType,s=[...n.data.entries()].map(([e,t],s)=>({key:r._parse(new B(n,e,n.path,[s,"key"])),value:i._parse(new B(n,t,n.path,[s,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of s){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return b;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of s){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return b;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}ke.create=(e,t,n)=>new ke({valueType:t,keyType:e,typeName:Fe.ZodMap,...R(n)});class Ae extends T{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==h.set)return v(n,{code:p.invalid_type,expected:h.set,received:n.parsedType}),b;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(v(n,{code:p.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(v(n,{code:p.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const n=new Set;for(const r of e){if("aborted"===r.status)return b;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const o=[...n.data.values()].map((e,t)=>i._parse(new B(n,e,n.path,t)));return n.common.async?Promise.all(o).then(e=>s(e)):s(o)}min(e,t){return new Ae({...this._def,minSize:{value:e,message:M.toString(t)}})}max(e,t){return new Ae({...this._def,maxSize:{value:e,message:M.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ae.create=(e,t)=>new Ae({valueType:e,minSize:null,maxSize:null,typeName:Fe.ZodSet,...R(t)});class Se extends T{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Se.create=(e,t)=>new Se({getter:e,typeName:Fe.ZodLazy,...R(t)});class Me extends T{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return v(t,{received:t.data,code:p.invalid_literal,expected:this._def.value}),b}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Ie(e,t){return new Be({values:e,typeName:Fe.ZodEnum,...R(t)})}Me.create=(e,t)=>new Me({value:e,typeName:Fe.ZodLiteral,...R(t)});class Be extends T{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return v(t,{expected:c.joinValues(n),received:t.parsedType,code:p.invalid_type}),b}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return v(t,{received:t.data,code:p.invalid_enum_value,options:n}),b}return x(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Be.create(e,{...this._def,...t})}exclude(e,t=this._def){return Be.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}Be.create=Ie;class Oe extends T{_parse(e){const t=c.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==h.string&&n.parsedType!==h.number){const e=c.objectValues(t);return v(n,{expected:c.joinValues(e),received:n.parsedType,code:p.invalid_type}),b}if(this._cache||(this._cache=new Set(c.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=c.objectValues(t);return v(n,{received:n.data,code:p.invalid_enum_value,options:e}),b}return x(e.data)}get enum(){return this._def.values}}Oe.create=(e,t)=>new Oe({values:e,typeName:Fe.ZodNativeEnum,...R(t)});class Re extends T{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.promise&&!1===t.common.async)return v(t,{code:p.invalid_type,expected:h.promise,received:t.parsedType}),b;const n=t.parsedType===h.promise?t.data:Promise.resolve(t.data);return x(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Re.create=(e,t)=>new Re({type:e,typeName:Fe.ZodPromise,...R(t)});class Te extends T{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{v(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return b;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?b:"dirty"===r.status||"dirty"===t.value?_(r.value):r});{if("aborted"===t.value)return b;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?b:"dirty"===r.status||"dirty"===t.value?_(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?b:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?b:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!A(e))return b;const s=r.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>A(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):b)}c.assertNever(r)}}Te.create=(e,t,n)=>new Te({schema:e,typeName:Fe.ZodEffects,effect:t,...R(n)}),Te.createWithPreprocess=(e,t,n)=>new Te({schema:t,effect:{type:"preprocess",transform:e},typeName:Fe.ZodEffects,...R(n)});class Le extends T{_parse(e){return this._getType(e)===h.undefined?x(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Le.create=(e,t)=>new Le({innerType:e,typeName:Fe.ZodOptional,...R(t)});class Pe extends T{_parse(e){return this._getType(e)===h.null?x(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pe.create=(e,t)=>new Pe({innerType:e,typeName:Fe.ZodNullable,...R(t)});class Ue extends T{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===h.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ue.create=(e,t)=>new Ue({innerType:e,typeName:Fe.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...R(t)});class Ce extends T{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return S(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new m(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new m(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ce.create=(e,t)=>new Ce({innerType:e,typeName:Fe.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...R(t)});class Ne extends T{_parse(e){if(this._getType(e)!==h.nan){const t=this._getOrReturnCtx(e);return v(t,{code:p.invalid_type,expected:h.nan,received:t.parsedType}),b}return{status:"valid",value:e.data}}}Ne.create=e=>new Ne({typeName:Fe.ZodNaN,...R(e)});class je extends T{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ze extends T{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?b:"dirty"===e.status?(t.dirty(),_(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?b:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new ze({in:e,out:t,typeName:Fe.ZodPipeline})}}class $e extends T{_parse(e){const t=this._def.innerType._parse(e),n=e=>(A(e)&&(e.value=Object.freeze(e.value)),e);return S(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}var Fe,De;$e.create=(e,t)=>new $e({innerType:e,typeName:Fe.ZodReadonly,...R(t)}),(De=Fe||(Fe={})).ZodString="ZodString",De.ZodNumber="ZodNumber",De.ZodNaN="ZodNaN",De.ZodBigInt="ZodBigInt",De.ZodBoolean="ZodBoolean",De.ZodDate="ZodDate",De.ZodSymbol="ZodSymbol",De.ZodUndefined="ZodUndefined",De.ZodNull="ZodNull",De.ZodAny="ZodAny",De.ZodUnknown="ZodUnknown",De.ZodNever="ZodNever",De.ZodVoid="ZodVoid",De.ZodArray="ZodArray",De.ZodObject="ZodObject",De.ZodUnion="ZodUnion",De.ZodDiscriminatedUnion="ZodDiscriminatedUnion",De.ZodIntersection="ZodIntersection",De.ZodTuple="ZodTuple",De.ZodRecord="ZodRecord",De.ZodMap="ZodMap",De.ZodSet="ZodSet",De.ZodFunction="ZodFunction",De.ZodLazy="ZodLazy",De.ZodLiteral="ZodLiteral",De.ZodEnum="ZodEnum",De.ZodEffects="ZodEffects",De.ZodNativeEnum="ZodNativeEnum",De.ZodOptional="ZodOptional",De.ZodNullable="ZodNullable",De.ZodDefault="ZodDefault",De.ZodCatch="ZodCatch",De.ZodPromise="ZodPromise",De.ZodBranded="ZodBranded",De.ZodPipeline="ZodPipeline",De.ZodReadonly="ZodReadonly";const Ze=ne.create,qe=ie.create,Ke=oe.create;fe.create;const Ve=me.create,We=ye.create,He=ve.create,Je=be.create;xe.create,Ee.create;const Ge=Me.create,Ye=Be.create;Re.create,Le.create,Pe.create;const Xe=/[@#$%^&*+=/\\|~]/,Qe=/(!{2,}|\?{2,}|-{2,})/,et=/[\u{1F300}-\u{1F9FF}]|[\u{2702}-\u{27B0}]|[\u{2600}-\u{26FF}]|[\u{2B00}-\u{2BFF}]/u,tt=({max:e,noSpaces:t}={})=>(t?Ze().max(e??Number.POSITIVE_INFINITY).regex(/^\S*$/,"Spaces are not allowed"):Ze().max(e??Number.POSITIVE_INFINITY)).refine(e=>!et.test(e),{message:"Emojis and symbols are not allowed"}).refine(e=>!Xe.test(e),{message:"Special characters (@, #, $, %, ^, &, *, +, =, /, \\, |, ~, , ) are not allowed"}).refine(e=>!Qe.test(e),{message:"Repeated punctuations (!!, ??, --) are not allowed"}),nt=Ze().url().startsWith("https://",{message:"Must be an https url"}).max(1024).refine(e=>!e.includes(" "),{message:"URL must not contain spaces"}).refine(e=>{try{const t=new URL(e).hostname;if("localhost"===t||t.endsWith(".localhost"))return!1;return!/^(\d{1,3}\.){3}\d{1,3}$/.test(t)&&(!t.startsWith("[")||!t.endsWith("]"))}catch{return!1}},{message:"URL must not use IP addresses or localhost"}),rt=Ze().max(32),it=Ze().max(32),st=Ze().regex(/^[-a-z0-9]{3,8}:[-_a-zA-Z0-9]{1,32}\/(?:[-a-z0-9]{3,8}:[-.%a-zA-Z0-9]{1,128}(?:\/[-.%a-zA-Z0-9]{1,78})?|native)$/,{message:"Invalid CAIP-19 asset ID"}),ot=Ze().regex(/^#([0-9A-F]{3}|[0-9A-F]{6})$/i,{message:"Invalid hex color code. It should be in the format #RRGGBB or #RGB."}),at=Ze().max(1024).regex(/^(?!.*\.\.)([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,{message:"Must be a valid domain name (e.g., example.com, sub.example.com)"}).refine(e=>!e.includes("://"),{message:"Domain must not include protocol (http://, https://, etc.)"}).refine(e=>!e.includes("/"),{message:"Domain must not include path separators"}).refine(e=>!e.includes("@"),{message:"Domain must not include @ symbol"}).refine(e=>!e.includes(":"),{message:"Domain must not include port numbers"}),ut=He([Ge("1:1"),Ge("3:2")]),ct=We({header:Ze(),payload:Ze(),signature:Ze()});We({fid:qe(),type:Ge("app_key"),key:Ze().startsWith("0x")});const lt=We({type:Ge("launch_frame"),name:rt,url:nt.optional(),splashImageUrl:nt.optional(),splashBackgroundColor:ot.optional()}),dt=We({type:Ge("launch_miniapp"),name:rt,url:nt.optional(),splashImageUrl:nt.optional(),splashBackgroundColor:ot.optional()}),ht=We({type:Ge("view_token"),token:st}),ft=We({title:it,action:Je("type",[dt,ht,lt])});We({version:He([Ze(),qe()]).transform(e=>String(e)).pipe(He([Ge("next"),Ge("1")])),imageUrl:nt,aspectRatio:ut.optional(),button:ft});const pt=We({url:Ze(),token:Ze()});We({notificationId:Ze().max(128),title:Ze().max(32),body:Ze().max(128),targetUrl:nt,tokens:Ze().array().max(100)}),We({result:We({successfulTokens:Ve(Ze()),invalidTokens:Ve(Ze()),rateLimitedTokens:Ve(Ze())})});Je("event",[We({event:Ge("miniapp_added"),notificationDetails:pt.optional()}),We({event:Ge("miniapp_removed")}),We({event:Ge("notifications_enabled"),notificationDetails:pt.required()}),We({event:Ge("notifications_disabled")})]);const mt=Ye(["games","social","finance","utility","productivity","health-fitness","news-media","music","shopping","education","developer-tools","entertainment","art-creativity"]),gt=He([Ge("0.0.0"),Ge("0.0.1"),Ge("1"),Ge("next")]),yt=tt({max:30}),vt=tt({max:170}),wt=Ve(nt).max(3),bt=Ve(tt({max:20,noSpaces:!0})).max(5),_t=tt({max:30}),xt=tt({max:30}),Et=tt({max:100}),kt=Ke();function At(e){const t=new Set(e);return Array.from(t)}const St=Ve(Ye(["eip155:1","eip155:8453","eip155:42161","eip155:421614","eip155:84532","eip155:666666666","eip155:100","eip155:10","eip155:11155420","eip155:137","eip155:11155111","eip155:7777777","eip155:130","eip155:10143","eip155:42220","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"])).transform(At),Mt=Ve(Ye(["wallet.getEthereumProvider","wallet.getSolanaProvider","actions.ready","actions.openUrl","actions.close","actions.setPrimaryButton","actions.addMiniApp","actions.signIn","actions.viewCast","actions.viewProfile","actions.composeCast","actions.viewToken","actions.sendToken","actions.swapToken","actions.openMiniApp","actions.requestCameraAndMicrophoneAccess","experimental.signManifest","haptics.impactOccurred","haptics.notificationOccurred","haptics.selectionChanged","back"])).transform(At),It=We({version:gt,name:rt,iconUrl:nt,homeUrl:nt,imageUrl:nt.optional(),buttonTitle:it.optional(),splashImageUrl:nt.optional(),splashBackgroundColor:ot.optional(),webhookUrl:nt.optional(),subtitle:yt.optional(),description:vt.optional(),screenshotUrls:wt.optional(),primaryCategory:mt.optional(),tags:bt.optional(),heroImageUrl:nt.optional(),tagline:_t.optional(),ogTitle:xt.optional(),ogDescription:Et.optional(),ogImageUrl:nt.optional(),noindex:kt.optional(),requiredChains:St.optional(),requiredCapabilities:Mt.optional(),castShareUrl:nt.optional(),canonicalDomain:at.optional()}).refine(e=>{if(void 0===e.castShareUrl)return!0;try{const t=new URL(e.homeUrl).hostname;return t===new URL(e.castShareUrl).hostname}catch{return!1}},{message:"castShareUrl must have the same domain as homeUrl",path:["castShareUrl"]});We({accountAssociation:ct,miniapp:It.optional(),frame:It.optional()}).refine(e=>!e.frame||!e.miniapp||JSON.stringify(e.frame)===JSON.stringify(e.miniapp),{message:'If both "frame" and "miniapp" are provided, they must be identical',path:["frame","miniapp"]}).transform(e=>({...e,frame:e.frame??e.miniapp}));var Bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ot(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rt(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}for(var Tt={},Lt={byteLength:function(e){var t=zt(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=zt(e),i=r[0],s=r[1],o=new Ct(function(e,t,n){return 3*(t+n)/4-n}(0,i,s)),a=0,u=s>0?i-4:i;for(n=0;n<u;n+=4)t=Ut[e.charCodeAt(n)]<<18|Ut[e.charCodeAt(n+1)]<<12|Ut[e.charCodeAt(n+2)]<<6|Ut[e.charCodeAt(n+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;2===s&&(t=Ut[e.charCodeAt(n)]<<2|Ut[e.charCodeAt(n+1)]>>4,o[a++]=255&t);1===s&&(t=Ut[e.charCodeAt(n)]<<10|Ut[e.charCodeAt(n+1)]<<4|Ut[e.charCodeAt(n+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t);return o},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(Ft(e,o,o+s>a?a:o+s));1===r?(t=e[n-1],i.push(Pt[t>>2]+Pt[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(Pt[t>>10]+Pt[t>>4&63]+Pt[t<<2&63]+"="));return i.join("")}},Pt=[],Ut=[],Ct="undefined"!=typeof Uint8Array?Uint8Array:Array,Nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jt=0;jt<64;++jt)Pt[jt]=Nt[jt],Ut[Nt.charCodeAt(jt)]=jt;function zt(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function $t(e){return Pt[e>>18&63]+Pt[e>>12&63]+Pt[e>>6&63]+Pt[63&e]}function Ft(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push($t(r));return i.join("")}Ut["-".charCodeAt(0)]=62,Ut["_".charCodeAt(0)]=63;var Dt={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+e[t+d],d+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+e[t+d],d+=h,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=c}return(f?-1:1)*o*Math.pow(2,s-r)},write:function(e,t,n,r,i,s){var o,a,u,c=8*s-i-1,l=(1<<c)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(t*u-1)*Math.pow(2,i),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*m}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
!function(e){const t=Lt,n=Dt,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},e.INSPECT_MAX_BYTES=50;const i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let r=s(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(W(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);const i=function(e){if(o.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||H(e.length)?s(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|h(e))}function l(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,o.prototype),r}function h(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(i)return r?-1:q(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),H(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){let s,o=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let r=-1;for(s=n;s<a;s++)if(c(e,s)===c(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===u)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(n+u>a&&(n=a-u),s=n;s>=0;s--){let n=!0;for(let r=0;r<u;r++)if(c(e,s+r)!==c(t,r)){n=!1;break}if(n)return s}return-1}function v(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=t.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(H(r))return o;e[n+o]=r}return o}function w(e,t,n,r){return V(q(t,e.length-n),e,n,r)}function b(e,t,n,r){return V(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return V(K(t),e,n,r)}function x(e,t,n,r){return V(function(e,t){let n,r,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function E(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function k(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,a,u;switch(o){case 1:t<128&&(s=t);break;case 2:n=e[i+1],128==(192&n)&&(u=(31&t)<<6|63&n,u>127&&(s=u));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(u=(15&t)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:n=e[i+1],r=e[i+2],a=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(u=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function(e){const t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(W(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=o.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(W(t,Uint8Array))i+t.length>r.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(e,t,n,r,i){if(W(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const u=Math.min(s,a),c=this.slice(r,i),l=e.slice(t,n);for(let o=0;o<u;++o)if(c[o]!==l[o]){s=c[o],a=l[o];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return b(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function S(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let s=t;s<n;++s)i+=J[e[s]];return i}function B(e,t,n){const r=e.slice(t,n);let i="";for(let s=0;s<r.length-1;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function T(e,t,n,r,i){$(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function L(e,t,n,r,i){$(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function P(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,r,i,s){return t=+t,r>>>=0,s||P(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function C(e,t,r,i,s){return t=+t,r>>>=0,s||P(e,0,r,8),n.write(e,t,r,i,52,8),r+8}o.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=G(function(e){F(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||D(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),o.prototype.readBigUInt64BE=G(function(e){F(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||D(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=t,i=1,s=this[e+--r];for(;r>0&&(i*=256);)s+=this[e+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=G(function(e){F(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||D(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),o.prototype.readBigInt64BE=G(function(e){F(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||D(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=G(function(e,t=0){return T(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=G(function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=0,s=1,o=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=G(function(e,t=0){return T(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=G(function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return C(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return C(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const s=o.isBuffer(e)?e:o.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};const N={};function j(e,t,n){N[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function $(e,t,n,r,i,s){if(e>n||e<t){const n="bigint"==typeof t?"n":"";let r;throw r=0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`,new N.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){F(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||D(t,e.length-(n+1))}(r,i,s)}function F(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function D(e,t,n){if(Math.floor(e)!==e)throw F(e,n),new N.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),j("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),j("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=z(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r},RangeError);const Z=/[^+/0-9A-Za-z-_]/g;function q(e,t){let n;t=t||1/0;const r=e.length;let i=null;const s=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function K(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function H(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function G(e){return"undefined"==typeof BigInt?Y:e}function Y(){throw new Error("BigInt not supported")}}(Tt);const Zt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Kt(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Vt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Wt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Ht(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Jt(e,t){return e<<32-t|e>>>t}function Gt(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e)),Kt(e),e}class Yt{}function Xt(e){const t=t=>e().update(Gt(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Qt(e=32){if(Zt&&"function"==typeof Zt.getRandomValues)return Zt.getRandomValues(new Uint8Array(e));if(Zt&&"function"==typeof Zt.randomBytes)return Uint8Array.from(Zt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function en(e,t,n){return e&t^~e&n}function tn(e,t,n){return e&t^e&n^t&n}class nn extends Yt{constructor(e,t,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(e),this.view=Ht(this.buffer)}update(e){Vt(this),Kt(e=Gt(e));const{view:t,buffer:n,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){const t=Ht(e);for(;r<=i-s;s+=r)this.process(t,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Vt(this),function(e,t){Kt(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,Wt(this.buffer.subarray(s)),this.padOffset>r-s&&(this.process(n,0),s=0);for(let l=s;l<r;l++)t[l]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),u=r?4:0,c=r?0:4;e.setUint32(t+u,o,r),e.setUint32(t+c,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=Ht(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,c[l],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return e.destroyed=s,e.finished=i,e.length=r,e.pos=o,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const rn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),on=BigInt(2**32-1),an=BigInt(32);function un(e,t=!1){return t?{h:Number(e&on),l:Number(e>>an&on)}:{h:0|Number(e>>an&on),l:0|Number(e&on)}}const cn=(e,t,n)=>e>>>n,ln=(e,t,n)=>e<<32-n|t>>>n,dn=(e,t,n)=>e>>>n|t<<32-n,hn=(e,t,n)=>e<<32-n|t>>>n,fn=(e,t,n)=>e<<64-n|t>>>n-32,pn=(e,t,n)=>e>>>n-32|t<<64-n;function mn(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}}const gn=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),yn=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,vn=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),wn=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,bn=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),_n=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,xn=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),En=new Uint32Array(64);class kn extends nn{constructor(e=32){super(64,e,8,!1),this.A=0|rn[0],this.B=0|rn[1],this.C=0|rn[2],this.D=0|rn[3],this.E=0|rn[4],this.F=0|rn[5],this.G=0|rn[6],this.H=0|rn[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[e,t,n,r,i,s,o,a]}set(e,t,n,r,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let l=0;l<16;l++,t+=4)En[l]=e.getUint32(t,!1);for(let l=16;l<64;l++){const e=En[l-15],t=En[l-2],n=Jt(e,7)^Jt(e,18)^e>>>3,r=Jt(t,17)^Jt(t,19)^t>>>10;En[l]=r+En[l-7]+n+En[l-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:u,H:c}=this;for(let l=0;l<64;l++){const e=c+(Jt(o,6)^Jt(o,11)^Jt(o,25))+en(o,a,u)+xn[l]+En[l]|0,t=(Jt(n,2)^Jt(n,13)^Jt(n,22))+tn(n,r,i)|0;c=u,u=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(n,r,i,s,o,a,u,c)}roundClean(){Wt(En)}destroy(){this.set(0,0,0,0,0,0,0,0),Wt(this.buffer)}}const An=(()=>function(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:n,l:o}=un(e[s],t);[r[s],i[s]]=[n,o]}return[r,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),Sn=(()=>An[0])(),Mn=(()=>An[1])(),In=new Uint32Array(80),Bn=new Uint32Array(80);class On extends nn{constructor(e=64){super(128,e,16,!1),this.Ah=0|sn[0],this.Al=0|sn[1],this.Bh=0|sn[2],this.Bl=0|sn[3],this.Ch=0|sn[4],this.Cl=0|sn[5],this.Dh=0|sn[6],this.Dl=0|sn[7],this.Eh=0|sn[8],this.El=0|sn[9],this.Fh=0|sn[10],this.Fl=0|sn[11],this.Gh=0|sn[12],this.Gl=0|sn[13],this.Hh=0|sn[14],this.Hl=0|sn[15]}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:s,Dh:o,Dl:a,Eh:u,El:c,Fh:l,Fl:d,Gh:h,Gl:f,Hh:p,Hl:m}=this;return[e,t,n,r,i,s,o,a,u,c,l,d,h,f,p,m]}set(e,t,n,r,i,s,o,a,u,c,l,d,h,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|l,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let v=0;v<16;v++,t+=4)In[v]=e.getUint32(t),Bn[v]=e.getUint32(t+=4);for(let v=16;v<80;v++){const e=0|In[v-15],t=0|Bn[v-15],n=dn(e,t,1)^dn(e,t,8)^cn(e,0,7),r=hn(e,t,1)^hn(e,t,8)^ln(e,t,7),i=0|In[v-2],s=0|Bn[v-2],o=dn(i,s,19)^fn(i,s,61)^cn(i,0,6),a=hn(i,s,19)^pn(i,s,61)^ln(i,s,6),u=vn(r,a,Bn[v-7],Bn[v-16]),c=wn(u,n,o,In[v-7],In[v-16]);In[v]=0|c,Bn[v]=0|u}let{Ah:n,Al:r,Bh:i,Bl:s,Ch:o,Cl:a,Dh:u,Dl:c,Eh:l,El:d,Fh:h,Fl:f,Gh:p,Gl:m,Hh:g,Hl:y}=this;for(let v=0;v<80;v++){const e=dn(l,d,14)^dn(l,d,18)^fn(l,d,41),t=hn(l,d,14)^hn(l,d,18)^pn(l,d,41),w=l&h^~l&p,b=bn(y,t,d&f^~d&m,Mn[v],Bn[v]),_=_n(b,g,e,w,Sn[v],In[v]),x=0|b,E=dn(n,r,28)^fn(n,r,34)^fn(n,r,39),k=hn(n,r,28)^pn(n,r,34)^pn(n,r,39),A=n&i^n&o^i&o,S=r&s^r&a^s&a;g=0|p,y=0|m,p=0|h,m=0|f,h=0|l,f=0|d,({h:l,l:d}=mn(0|u,0|c,0|_,0|x)),u=0|o,c=0|a,o=0|i,a=0|s,i=0|n,s=0|r;const M=gn(x,k,S);n=yn(M,_,E,A),r=0|M}({h:n,l:r}=mn(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:s}=mn(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=mn(0|this.Ch,0|this.Cl,0|o,0|a)),({h:u,l:c}=mn(0|this.Dh,0|this.Dl,0|u,0|c)),({h:l,l:d}=mn(0|this.Eh,0|this.El,0|l,0|d)),({h:h,l:f}=mn(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:m}=mn(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:y}=mn(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(n,r,i,s,o,a,u,c,l,d,h,f,p,m,g,y)}roundClean(){Wt(In,Bn)}destroy(){Wt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Rn=Xt(()=>new kn),Tn=Xt(()=>new On),Ln=BigInt(0),Pn=BigInt(1);function Un(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Cn(e){if(!Un(e))throw new Error("Uint8Array expected")}function Nn(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}function jn(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function zn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Ln:BigInt("0x"+e)}const $n="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,Fn=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Dn(e){if(Cn(e),$n)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Fn[e[n]];return t}const Zn=48,qn=57,Kn=65,Vn=70,Wn=97,Hn=102;function Jn(e){return e>=Zn&&e<=qn?e-Zn:e>=Kn&&e<=Vn?e-(Kn-10):e>=Wn&&e<=Hn?e-(Wn-10):void 0}function Gn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if($n)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const t=Jn(e.charCodeAt(s)),n=Jn(e.charCodeAt(s+1));if(void 0===t||void 0===n){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[i]=16*t+n}return r}function Yn(e){return zn(Dn(e))}function Xn(e){return Cn(e),zn(Dn(Uint8Array.from(e).reverse()))}function Qn(e,t){return Gn(e.toString(16).padStart(2*t,"0"))}function er(e,t){return Qn(e,t).reverse()}function tr(e,t,n){let r;if("string"==typeof t)try{r=Gn(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else{if(!Un(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function nr(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Cn(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const t=e[r];n.set(t,i),i+=t.length}return n}const rr=e=>"bigint"==typeof e&&Ln<=e;function ir(e,t,n){return rr(e)&&rr(t)&&rr(n)&&t<=e&&e<n}function sr(e,t,n,r){if(!ir(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}const or=e=>(Pn<<BigInt(e))-Pn,ar=e=>new Uint8Array(e),ur=e=>Uint8Array.from(e);const cr={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Un(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function lr(e,t,n={}){const r=(t,n,r)=>{const i=cr[n];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(r&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+s)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}function dr(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(void 0!==i)return i;const s=e(n,...r);return t.set(n,s),s}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hr=BigInt(0),fr=BigInt(1),pr=BigInt(2),mr=BigInt(3),gr=BigInt(4),yr=BigInt(5),vr=BigInt(8);function wr(e,t){const n=e%t;return n>=hr?n:t+n}function br(e,t,n){let r=e;for(;t-- >hr;)r*=r,r%=n;return r}function _r(e,t){if(e===hr)throw new Error("invert: expected non-zero number");if(t<=hr)throw new Error("invert: expected positive modulus, got "+t);let n=wr(e,t),r=t,i=hr,s=fr;for(;n!==hr;){const e=r%n,t=i-s*(r/n);r=n,n=e,i=s,s=t}if(r!==fr)throw new Error("invert: does not exist");return wr(i,t)}function xr(e,t){const n=(e.ORDER+fr)/gr,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Er(e,t){const n=(e.ORDER-yr)/vr,r=e.mul(t,pr),i=e.pow(r,n),s=e.mul(t,i),o=e.mul(e.mul(s,pr),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function kr(e){return e%gr===mr?xr:e%vr===yr?Er:function(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-fr,n=0;for(;t%pr===hr;)t/=pr,n++;let r=pr;const i=Br(e);for(;1===Mr(i,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return xr;let s=i.pow(r,t);const o=(t+fr)/pr;return function(e,r){if(e.is0(r))return r;if(1!==Mr(e,r))throw new Error("Cannot find square root");let i=n,a=e.mul(e.ONE,s),u=e.pow(r,t),c=e.pow(r,o);for(;!e.eql(u,e.ONE);){if(e.is0(u))return e.ZERO;let t=1,n=e.sqr(u);for(;!e.eql(n,e.ONE);)if(t++,n=e.sqr(n),t===i)throw new Error("Cannot find square root");const r=fr<<BigInt(i-t-1),s=e.pow(a,r);i=t,a=e.sqr(s),u=e.mul(u,a),c=e.mul(c,s)}return c}}(e)}const Ar=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Sr(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),s=e.inv(i);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),s),r}function Mr(e,t){const n=(e.ORDER-fr)/pr,r=e.pow(t,n),i=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Ir(e,t){void 0!==t&&qt(t);const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Br(e,t,n=!1,r={}){if(e<=hr)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=Ir(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:s,MASK:or(i),ZERO:hr,ONE:fr,create:t=>wr(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return hr<=t&&t<e},is0:e=>e===hr,isOdd:e=>(e&fr)===fr,neg:t=>wr(-t,e),eql:(e,t)=>e===t,sqr:t=>wr(t*t,e),add:(t,n)=>wr(t+n,e),sub:(t,n)=>wr(t-n,e),mul:(t,n)=>wr(t*n,e),pow:(e,t)=>function(e,t,n){if(n<hr)throw new Error("invalid exponent, negatives unsupported");if(n===hr)return e.ONE;if(n===fr)return t;let r=e.ONE,i=t;for(;n>hr;)n&fr&&(r=e.mul(r,i)),i=e.sqr(i),n>>=fr;return r}(a,e,t),div:(t,n)=>wr(t*_r(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>_r(t,e),sqrt:r.sqrt||(t=>(o||(o=kr(e)),o(a,t))),toBytes:e=>n?er(e,s):Qn(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return n?Xn(e):Yn(e)},invertBatch:e=>Sr(a,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(a)}function Or(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Rr(e){const t=Or(e);return t+Math.ceil(t/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Tr=BigInt(0),Lr=BigInt(1);function Pr(e,t){const n=t.negate();return e?n:t}function Ur(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Cr(e,t){Ur(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:or(e),maxNumber:n,shiftBy:BigInt(e)}}function Nr(e,t,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(e&i),u=e>>o;a>r&&(a-=s,u+=Lr);const c=t*r;return{nextN:u,offset:c+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:c}}const jr=new WeakMap,zr=new WeakMap;function $r(e){return zr.get(e)||1}function Fr(e,t){return{constTimeNegate:Pr,hasPrecomputes:e=>1!==$r(e),unsafeLadder(t,n,r=e.ZERO){let i=t;for(;n>Tr;)n&Lr&&(r=r.add(i)),i=i.double(),n>>=Lr;return r},precomputeWindow(e,n){const{windows:r,windowSize:i}=Cr(n,t),s=[];let o=e,a=o;for(let t=0;t<r;t++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(n,r,i){let s=e.ZERO,o=e.BASE;const a=Cr(n,t);for(let e=0;e<a.windows;e++){const{nextN:t,offset:n,isZero:u,isNeg:c,isNegF:l,offsetF:d}=Nr(i,e,a);i=t,u?o=o.add(Pr(l,r[d])):s=s.add(Pr(c,r[n]))}return{p:s,f:o}},wNAFUnsafe(n,r,i,s=e.ZERO){const o=Cr(n,t);for(let e=0;e<o.windows&&i!==Tr;e++){const{nextN:t,offset:n,isZero:a,isNeg:u}=Nr(i,e,o);if(i=t,!a){const e=r[n];s=s.add(u?e.negate():e)}}return s},getPrecomputes(e,t,n){let r=jr.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&jr.set(t,n(r))),r},wNAFCached(e,t,n){const r=$r(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){const i=$r(e);return 1===i?this.unsafeLadder(e,t,r):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,r)},setWindowSize(e,n){Ur(n,t),zr.set(e,n),jr.delete(e)}}}function Dr(e,t,n,r){!function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}(n,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}(r,t);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=function(e){let t;for(t=0;e>Ln;e>>=Pn,t+=1);return t}(BigInt(i));let u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);const c=or(u),l=new Array(Number(c)+1).fill(o);let d=o;for(let h=Math.floor((t.BITS-1)/u)*u;h>=0;h-=u){l.fill(o);for(let t=0;t<s;t++){const e=r[t],i=Number(e>>BigInt(h)&c);l[i]=l[i].add(n[t])}let e=o;for(let t=l.length-1,n=o;t>0;t--)n=n.add(l[t]),e=e.add(n);if(d=d.add(e),0!==h)for(let t=0;t<u;t++)d=d.double()}return d}function Zr(e){return lr(e.Fp,Ar.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),lr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ir(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qr=BigInt(0),Kr=BigInt(1),Vr=BigInt(2),Wr=BigInt(8),Hr={zip215:!0};function Jr(e){const t=function(e){const t=Zr(e);return lr(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:u}=t,c=Vr<<BigInt(8*a)-Kr,l=n.create,d=Br(t.n,t.nBitLength);if(!function(e,r){const i=n.sqr(e),s=n.sqr(r),o=n.add(n.mul(t.a,i),s),a=n.add(n.ONE,n.mul(t.d,n.mul(i,s)));return n.eql(o,a)}(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const h=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(e*n.inv(t))}}catch(r){return{isValid:!1,value:qr}}}),f=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,n)=>{if(Nn("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function m(e,t,n=!1){sr("coordinate "+e,t,n?Kr:qr,c)}function g(e){if(!(e instanceof w))throw new Error("ExtendedPoint expected")}const y=dr((e,t)=>{const{ex:r,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?Wr:n.inv(s));const a=l(r*t),u=l(i*t),c=l(s*t);if(o)return{x:qr,y:Kr};if(c!==Kr)throw new Error("invZ was invalid");return{x:a,y:u}}),v=dr(e=>{const{a:n,d:r}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,u=l(i*i),c=l(s*s),d=l(o*o),h=l(d*d),f=l(u*n);if(l(d*l(f+c))!==l(h+l(r*l(u*c))))throw new Error("bad point: equation left != right (1)");if(l(i*s)!==l(o*a))throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(e,t,n,r){m("x",e),m("y",t),m("z",n,!0),m("t",r),this.ex=e,this.ey=t,this.ez=n,this.et=r,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof w)throw new Error("extended point not allowed");const{x:t,y:n}=e||{};return m("x",t),m("y",n),new w(t,n,Kr,l(t*n))}static normalizeZ(e){const t=Sr(n,e.map(e=>e.ez));return e.map((e,n)=>e.toAffine(t[n])).map(w.fromAffine)}static msm(e,t){return Dr(w,d,e,t)}_setWindowSize(e){x.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){g(e);const{ex:t,ey:n,ez:r}=this,{ex:i,ey:s,ez:o}=e,a=l(t*o),u=l(i*r),c=l(n*o),d=l(s*r);return a===u&&c===d}is0(){return this.equals(w.ZERO)}negate(){return new w(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:e}=t,{ex:n,ey:r,ez:i}=this,s=l(n*n),o=l(r*r),a=l(Vr*l(i*i)),u=l(e*s),c=n+r,d=l(l(c*c)-s-o),h=u+o,f=h-a,p=u-o,m=l(d*f),g=l(h*p),y=l(d*p),v=l(f*h);return new w(m,g,v,y)}add(e){g(e);const{a:n,d:r}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:u,ey:c,ez:d,et:h}=e,f=l(i*u),p=l(s*c),m=l(a*r*h),y=l(o*d),v=l((i+s)*(u+c)-f-p),b=y-m,_=y+m,x=l(p-n*f),E=l(v*b),k=l(_*x),A=l(v*x),S=l(b*_);return new w(E,k,S,A)}subtract(e){return this.add(e.negate())}wNAF(e){return x.wNAFCached(this,e,w.normalizeZ)}multiply(e){const t=e;sr("scalar",t,Kr,r);const{p:n,f:i}=this.wNAF(t);return w.normalizeZ([n,i])[0]}multiplyUnsafe(e,t=w.ZERO){const n=e;return sr("scalar",n,qr,r),n===qr?_:this.is0()||n===Kr?this:x.wNAFCachedUnsafe(this,n,w.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return x.unsafeLadder(this,r).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===Kr?this:this.multiplyUnsafe(e)}static fromHex(e,r=!1){const{d:i,a:s}=t,o=n.BYTES;e=tr("pointHex",e,o),Nn("zip215",r);const a=e.slice(),u=e[o-1];a[o-1]=-129&u;const d=Xn(a),f=r?c:n.ORDER;sr("pointHex.y",d,qr,f);const p=l(d*d),m=l(p-Kr),g=l(i*p-s);let{isValid:y,value:v}=h(m,g);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const b=(v&Kr)===Kr,_=!!(128&u);if(!r&&v===qr&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==b&&(v=l(-v)),w.fromAffine({x:v,y:d})}static fromPrivateKey(e){const{scalar:t}=A(e);return b.multiply(t)}toRawBytes(){const{x:e,y:t}=this.toAffine(),r=er(t,n.BYTES);return r[r.length-1]|=e&Kr?128:0,r}toHex(){return Dn(this.toRawBytes())}}w.BASE=new w(t.Gx,t.Gy,Kr,l(t.Gx*t.Gy)),w.ZERO=new w(qr,Kr,Kr,qr);const{BASE:b,ZERO:_}=w,x=Fr(w,8*a);function E(e){return wr(e,r)}function k(e){return E(Xn(e))}function A(e){const t=n.BYTES;e=tr("private key",e,t);const r=tr("hashed private key",s(e),2*t),i=f(r.slice(0,t));return{head:i,prefix:r.slice(t,2*t),scalar:k(i)}}function S(e){const{head:t,prefix:n,scalar:r}=A(e),i=b.multiply(r),s=i.toRawBytes();return{head:t,prefix:n,scalar:r,point:i,pointBytes:s}}function M(e=Uint8Array.of(),...t){const n=nr(...t);return k(s(p(n,tr("context",e),!!i)))}const I=Hr;b._setWindowSize(8);return{CURVE:t,getPublicKey:function(e){return S(e).pointBytes},sign:function(e,t,s={}){e=tr("message",e),i&&(e=i(e));const{prefix:o,scalar:a,pointBytes:u}=S(t),c=M(s.context,o,e),l=b.multiply(c).toRawBytes(),d=E(c+M(s.context,l,u,e)*a);return sr("signature.s",d,qr,r),tr("result",nr(l,er(d,n.BYTES)),2*n.BYTES)},verify:function(e,t,r,s=I){const{context:o,zip215:a}=s,u=n.BYTES;e=tr("signature",e,2*u),t=tr("message",t),r=tr("publicKey",r,u),void 0!==a&&Nn("zip215",a),i&&(t=i(t));const c=Xn(e.slice(u,2*u));let l,d,h;try{l=w.fromHex(r,a),d=w.fromHex(e.slice(0,u),a),h=b.multiplyUnsafe(c)}catch(p){return!1}if(!a&&l.isSmallOrder())return!1;const f=M(o,d.toRawBytes(),l.toRawBytes(),t);return d.add(l.multiplyUnsafe(f)).subtract(h).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute:(e=8,t=w.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gr=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Yr=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Xr=BigInt(1),Qr=BigInt(2);BigInt(3);const ei=BigInt(5),ti=BigInt(8);function ni(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function ri(e,t){const n=Gr,r=wr(t*t*t,n),i=function(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=Gr,o=e*e%s*e%s,a=br(o,Qr,s)*o%s,u=br(a,Xr,s)*e%s,c=br(u,ei,s)*u%s,l=br(c,t,s)*c%s,d=br(l,n,s)*l%s,h=br(d,r,s)*d%s,f=br(h,i,s)*h%s,p=br(f,i,s)*h%s,m=br(p,t,s)*c%s;return{pow_p_5_8:br(m,Qr,s)*e%s,b2:o}}(e*wr(r*r*t,n)).pow_p_5_8;let s=wr(e*r*i,n);const o=wr(t*s*s,n),a=s,u=wr(s*Yr,n),c=o===e,l=o===wr(-e,n),d=o===wr(-e*Yr,n);return c&&(s=a),(l||d)&&(s=u),(wr(s,n)&fr)===fr&&(s=wr(-s,n)),{isValid:c||l,value:s}}const ii=(()=>Br(Gr,void 0,!0))(),si=(()=>({a:ii.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ii,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ti,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Tn,randomBytes:Qt,adjustScalarBytes:ni,uvRatio:ri}))(),oi=(()=>Jr(si))();var ai={exports:{}};const ui=Rt(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:ui.Buffer}catch(S){}function o(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function a(e,t,n){var r=o(e,n);return n-1>=t&&(r|=o(e,n-1)<<4),r}function u(e,t,r,i){for(var s=0,o=0,a=Math.min(e.length,r),u=t;u<a;u++){var c=e.charCodeAt(u)-48;s*=i,o=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&o<i,"Invalid character"),s+=o}return s}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,s=0,o=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=a(e,t,r)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=a(e,t,r)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var s=e.length-n,o=s%r,a=Math.min(s,s-o)+n,c=0,l=n;l<a;l+=r)c=u(e,l,l+r,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var d=1;for(c=u(e,l,e.length,t),l=0;l<o;l++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){c(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(S){i.prototype.inspect=l}else i.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,u=o/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var l=u>>>26,d=67108863&u,h=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=h;f++){var p=c-f|0;l+=(o=(i=0|e.words[p])*(s=0|t.words[f])+d)/67108864|0,d=67108863&o}n.words[c]=0|d,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n._strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],u=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-u.length]+u+r:u+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],l=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(l).toString(e);r=(p=p.idivn(l)).isZero()?m+r:d[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,i),o},i.prototype._toArrayLikeLE=function(e,t){for(var n=0,r=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|r;e[n++]=255&o,n<e.length&&(e[n++]=o>>8&255),n<e.length&&(e[n++]=o>>16&255),6===s?(n<e.length&&(e[n++]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(n<e.length)for(e[n++]=r;n<e.length;)e[n++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,r=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|r;e[n--]=255&o,n>=0&&(e[n--]=o>>8&255),n>=0&&(e[n--]=o>>16&255),6===s?(n>=0&&(e[n--]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(n>=0)for(e[n--]=r;n>=0;)e[n--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 8191&t||(n+=13,t>>>=13),127&t||(n+=7,t>>>=7),15&t||(n+=4,t>>>=4),3&t||(n+=2,t>>>=2),1&t||n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,s=0;s<r.length;s++)t=(0|n.words[s])+(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<n.length;s++)t=(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var s=0,o=0;o<r.length;o++)s=(t=(0|n.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<n.length;o++)s=(t=(0|n.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,n){var r,i,s,o=e.words,a=t.words,u=n.words,c=0,l=0|o[0],d=8191&l,h=l>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],y=8191&g,v=g>>>13,w=0|o[3],b=8191&w,_=w>>>13,x=0|o[4],E=8191&x,k=x>>>13,A=0|o[5],S=8191&A,M=A>>>13,I=0|o[6],B=8191&I,O=I>>>13,R=0|o[7],T=8191&R,L=R>>>13,P=0|o[8],U=8191&P,C=P>>>13,N=0|o[9],j=8191&N,z=N>>>13,$=0|a[0],F=8191&$,D=$>>>13,Z=0|a[1],q=8191&Z,K=Z>>>13,V=0|a[2],W=8191&V,H=V>>>13,J=0|a[3],G=8191&J,Y=J>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,te=0|a[5],ne=8191&te,re=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(d,F))|0)+((8191&(i=(i=Math.imul(d,D))+Math.imul(h,F)|0))<<13)|0;c=((s=Math.imul(h,D))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,F),i=(i=Math.imul(p,D))+Math.imul(m,F)|0,s=Math.imul(m,D);var ye=(c+(r=r+Math.imul(d,q)|0)|0)+((8191&(i=(i=i+Math.imul(d,K)|0)+Math.imul(h,q)|0))<<13)|0;c=((s=s+Math.imul(h,K)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(y,F),i=(i=Math.imul(y,D))+Math.imul(v,F)|0,s=Math.imul(v,D),r=r+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,q)|0,s=s+Math.imul(m,K)|0;var ve=(c+(r=r+Math.imul(d,W)|0)|0)+((8191&(i=(i=i+Math.imul(d,H)|0)+Math.imul(h,W)|0))<<13)|0;c=((s=s+Math.imul(h,H)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(b,F),i=(i=Math.imul(b,D))+Math.imul(_,F)|0,s=Math.imul(_,D),r=r+Math.imul(y,q)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(v,q)|0,s=s+Math.imul(v,K)|0,r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,H)|0;var we=(c+(r=r+Math.imul(d,G)|0)|0)+((8191&(i=(i=i+Math.imul(d,Y)|0)+Math.imul(h,G)|0))<<13)|0;c=((s=s+Math.imul(h,Y)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(E,F),i=(i=Math.imul(E,D))+Math.imul(k,F)|0,s=Math.imul(k,D),r=r+Math.imul(b,q)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(_,q)|0,s=s+Math.imul(_,K)|0,r=r+Math.imul(y,W)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(v,W)|0,s=s+Math.imul(v,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,s=s+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(d,Q)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((s=s+Math.imul(h,ee)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,F),i=(i=Math.imul(S,D))+Math.imul(M,F)|0,s=Math.imul(M,D),r=r+Math.imul(E,q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(k,q)|0,s=s+Math.imul(k,K)|0,r=r+Math.imul(b,W)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(_,W)|0,s=s+Math.imul(_,H)|0,r=r+Math.imul(y,G)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(v,G)|0,s=s+Math.imul(v,Y)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(d,ne)|0)|0)+((8191&(i=(i=i+Math.imul(d,re)|0)+Math.imul(h,ne)|0))<<13)|0;c=((s=s+Math.imul(h,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(B,F),i=(i=Math.imul(B,D))+Math.imul(O,F)|0,s=Math.imul(O,D),r=r+Math.imul(S,q)|0,i=(i=i+Math.imul(S,K)|0)+Math.imul(M,q)|0,s=s+Math.imul(M,K)|0,r=r+Math.imul(E,W)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(k,W)|0,s=s+Math.imul(k,H)|0,r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(_,G)|0,s=s+Math.imul(_,Y)|0,r=r+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(v,Q)|0,s=s+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,s=s+Math.imul(m,re)|0;var xe=(c+(r=r+Math.imul(d,se)|0)|0)+((8191&(i=(i=i+Math.imul(d,oe)|0)+Math.imul(h,se)|0))<<13)|0;c=((s=s+Math.imul(h,oe)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(T,F),i=(i=Math.imul(T,D))+Math.imul(L,F)|0,s=Math.imul(L,D),r=r+Math.imul(B,q)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(O,q)|0,s=s+Math.imul(O,K)|0,r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,H)|0,r=r+Math.imul(E,G)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(k,G)|0,s=s+Math.imul(k,Y)|0,r=r+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,ee)|0,r=r+Math.imul(y,ne)|0,i=(i=i+Math.imul(y,re)|0)+Math.imul(v,ne)|0,s=s+Math.imul(v,re)|0,r=r+Math.imul(p,se)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(m,se)|0,s=s+Math.imul(m,oe)|0;var Ee=(c+(r=r+Math.imul(d,ue)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((s=s+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(U,F),i=(i=Math.imul(U,D))+Math.imul(C,F)|0,s=Math.imul(C,D),r=r+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(L,q)|0,s=s+Math.imul(L,K)|0,r=r+Math.imul(B,W)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(O,W)|0,s=s+Math.imul(O,H)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(M,G)|0,s=s+Math.imul(M,Y)|0,r=r+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,ee)|0,r=r+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,re)|0)+Math.imul(_,ne)|0,s=s+Math.imul(_,re)|0,r=r+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(v,se)|0,s=s+Math.imul(v,oe)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,s=s+Math.imul(m,ce)|0;var ke=(c+(r=r+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((s=s+Math.imul(h,he)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(j,F),i=(i=Math.imul(j,D))+Math.imul(z,F)|0,s=Math.imul(z,D),r=r+Math.imul(U,q)|0,i=(i=i+Math.imul(U,K)|0)+Math.imul(C,q)|0,s=s+Math.imul(C,K)|0,r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(L,W)|0,s=s+Math.imul(L,H)|0,r=r+Math.imul(B,G)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(O,G)|0,s=s+Math.imul(O,Y)|0,r=r+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,ee)|0,r=r+Math.imul(E,ne)|0,i=(i=i+Math.imul(E,re)|0)+Math.imul(k,ne)|0,s=s+Math.imul(k,re)|0,r=r+Math.imul(b,se)|0,i=(i=i+Math.imul(b,oe)|0)+Math.imul(_,se)|0,s=s+Math.imul(_,oe)|0,r=r+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(v,ue)|0,s=s+Math.imul(v,ce)|0,r=r+Math.imul(p,de)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(m,de)|0,s=s+Math.imul(m,he)|0;var Ae=(c+(r=r+Math.imul(d,pe)|0)|0)+((8191&(i=(i=i+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;c=((s=s+Math.imul(h,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(j,q),i=(i=Math.imul(j,K))+Math.imul(z,q)|0,s=Math.imul(z,K),r=r+Math.imul(U,W)|0,i=(i=i+Math.imul(U,H)|0)+Math.imul(C,W)|0,s=s+Math.imul(C,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(L,G)|0,s=s+Math.imul(L,Y)|0,r=r+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(O,Q)|0,s=s+Math.imul(O,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(M,ne)|0,s=s+Math.imul(M,re)|0,r=r+Math.imul(E,se)|0,i=(i=i+Math.imul(E,oe)|0)+Math.imul(k,se)|0,s=s+Math.imul(k,oe)|0,r=r+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(_,ue)|0,s=s+Math.imul(_,ce)|0,r=r+Math.imul(y,de)|0,i=(i=i+Math.imul(y,he)|0)+Math.imul(v,de)|0,s=s+Math.imul(v,he)|0;var Se=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((s=s+Math.imul(m,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(j,W),i=(i=Math.imul(j,H))+Math.imul(z,W)|0,s=Math.imul(z,H),r=r+Math.imul(U,G)|0,i=(i=i+Math.imul(U,Y)|0)+Math.imul(C,G)|0,s=s+Math.imul(C,Y)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(L,Q)|0,s=s+Math.imul(L,ee)|0,r=r+Math.imul(B,ne)|0,i=(i=i+Math.imul(B,re)|0)+Math.imul(O,ne)|0,s=s+Math.imul(O,re)|0,r=r+Math.imul(S,se)|0,i=(i=i+Math.imul(S,oe)|0)+Math.imul(M,se)|0,s=s+Math.imul(M,oe)|0,r=r+Math.imul(E,ue)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(k,ue)|0,s=s+Math.imul(k,ce)|0,r=r+Math.imul(b,de)|0,i=(i=i+Math.imul(b,he)|0)+Math.imul(_,de)|0,s=s+Math.imul(_,he)|0;var Me=(c+(r=r+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((s=s+Math.imul(v,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(j,G),i=(i=Math.imul(j,Y))+Math.imul(z,G)|0,s=Math.imul(z,Y),r=r+Math.imul(U,Q)|0,i=(i=i+Math.imul(U,ee)|0)+Math.imul(C,Q)|0,s=s+Math.imul(C,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(L,ne)|0,s=s+Math.imul(L,re)|0,r=r+Math.imul(B,se)|0,i=(i=i+Math.imul(B,oe)|0)+Math.imul(O,se)|0,s=s+Math.imul(O,oe)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(M,ue)|0,s=s+Math.imul(M,ce)|0,r=r+Math.imul(E,de)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(k,de)|0,s=s+Math.imul(k,he)|0;var Ie=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((s=s+Math.imul(_,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(j,Q),i=(i=Math.imul(j,ee))+Math.imul(z,Q)|0,s=Math.imul(z,ee),r=r+Math.imul(U,ne)|0,i=(i=i+Math.imul(U,re)|0)+Math.imul(C,ne)|0,s=s+Math.imul(C,re)|0,r=r+Math.imul(T,se)|0,i=(i=i+Math.imul(T,oe)|0)+Math.imul(L,se)|0,s=s+Math.imul(L,oe)|0,r=r+Math.imul(B,ue)|0,i=(i=i+Math.imul(B,ce)|0)+Math.imul(O,ue)|0,s=s+Math.imul(O,ce)|0,r=r+Math.imul(S,de)|0,i=(i=i+Math.imul(S,he)|0)+Math.imul(M,de)|0,s=s+Math.imul(M,he)|0;var Be=(c+(r=r+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((s=s+Math.imul(k,me)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,r=Math.imul(j,ne),i=(i=Math.imul(j,re))+Math.imul(z,ne)|0,s=Math.imul(z,re),r=r+Math.imul(U,se)|0,i=(i=i+Math.imul(U,oe)|0)+Math.imul(C,se)|0,s=s+Math.imul(C,oe)|0,r=r+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(L,ue)|0,s=s+Math.imul(L,ce)|0,r=r+Math.imul(B,de)|0,i=(i=i+Math.imul(B,he)|0)+Math.imul(O,de)|0,s=s+Math.imul(O,he)|0;var Oe=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((s=s+Math.imul(M,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(j,se),i=(i=Math.imul(j,oe))+Math.imul(z,se)|0,s=Math.imul(z,oe),r=r+Math.imul(U,ue)|0,i=(i=i+Math.imul(U,ce)|0)+Math.imul(C,ue)|0,s=s+Math.imul(C,ce)|0,r=r+Math.imul(T,de)|0,i=(i=i+Math.imul(T,he)|0)+Math.imul(L,de)|0,s=s+Math.imul(L,he)|0;var Re=(c+(r=r+Math.imul(B,pe)|0)|0)+((8191&(i=(i=i+Math.imul(B,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((s=s+Math.imul(O,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(j,ue),i=(i=Math.imul(j,ce))+Math.imul(z,ue)|0,s=Math.imul(z,ce),r=r+Math.imul(U,de)|0,i=(i=i+Math.imul(U,he)|0)+Math.imul(C,de)|0,s=s+Math.imul(C,he)|0;var Te=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((s=s+Math.imul(L,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(j,de),i=(i=Math.imul(j,he))+Math.imul(z,de)|0,s=Math.imul(z,he);var Le=(c+(r=r+Math.imul(U,pe)|0)|0)+((8191&(i=(i=i+Math.imul(U,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((s=s+Math.imul(C,me)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863;var Pe=(c+(r=Math.imul(j,pe))|0)+((8191&(i=(i=Math.imul(j,me))+Math.imul(z,pe)|0))<<13)|0;return c=((s=Math.imul(z,me))+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,u[0]=ge,u[1]=ye,u[2]=ve,u[3]=we,u[4]=be,u[5]=_e,u[6]=xe,u[7]=Ee,u[8]=ke,u[9]=Ae,u[10]=Se,u[11]=Me,u[12]=Ie,u[13]=Be,u[14]=Oe,u[15]=Re,u[16]=Te,u[17]=Le,u[18]=Pe,0!==c&&(u[19]=c,n.length++),n};function g(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,s=0;s<n.length-1;s++){var o=i;i=0;for(var a=67108863&r,u=Math.min(s,t.length-1),c=Math.max(0,s-e.length+1);c<=u;c++){var l=s-c,d=(0|e.words[l])*(0|t.words[c]),h=67108863&d;a=67108863&(h=h+a|0),i+=(o=(o=o+(d/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}n.words[s]=a,r=o,o=i}return 0!==r?n.words[s]=r:n.length--,n._strip()}function y(e,t,n){return g(e,t,n)}Math.imul||(m=p),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):n<63?p(this,e,t):n<1024?g(this,e,t):y(this,e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),y(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=e.words[r]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var s=n.sqr();r<t.length;r++,s=s.sqr())0!==t[r]&&(n=n.mul(s));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,u=(0|this.words[t])-a<<r;this.words[t]=u|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,u=r;if(i-=o,i=Math.max(0,i),u){for(var c=0;c<o;c++)u.words[c]=this.words[c];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var d=0|this.words[c];this.words[c]=l<<26-s|d>>>s,l=d&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var u=(0|e.words[i])*t;a=((s-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),s=e,o=0|s.words[s.length-1];0!=(n=26-this._countBits(o))&&(s=s.ushln(n),r.iushln(n),o=0|s.words[s.length-1]);var a,u=r.length-s.length;if("mod"!==t){(a=new i(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=r.clone()._ishlnsubmul(s,1,u);0===l.negative&&(r=l,a&&(a.words[u]=1));for(var d=u-1;d>=0;d--){var h=67108864*(0|r.words[s.length+d])+(0|r.words[s.length+d-1]);for(h=Math.min(h/o|0,67108863),r._ishlnsubmul(s,h,d);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(s,1,d),r.isZero()||(r.negative^=1);a&&(a.words[d]=h)}return a&&a._strip(),r._strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(s=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:s,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(s=a.div.neg()),{div:s,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var s,o,a},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),s=n.cmp(r);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new i(1),o=new i(0),a=new i(0),u=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(l),o.isub(d)),s.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(d)),a.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a),o.isub(u)):(r.isub(t),a.isub(s),u.isub(o))}return{a:a,b:u,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s,o=new i(1),a=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0===(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var d=0,h=1;0===(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(s=0===t.cmpn(1)?o:a).cmpn(0)<0&&s.iadd(e),s},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var s=t;t=n,n=s}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new k(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function A(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},r(b,w),b.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&n,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&n)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(_,w),r(x,w),r(E,w),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new _;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return v[e]=t,t},k.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},k.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var s=this.m.subn(1),o=0;!s.isZero()&&0===s.andln(1);)o++,s.iushrn(1);n(!s.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var d=this.pow(l,s),h=this.pow(e,s.addn(1).iushrn(1)),f=this.pow(e,s),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(d,new i(1).iushln(p-g-1));h=h.redMul(y),d=y.redSqr(),f=f.redMul(d),p=g}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var s=n[0],o=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var d=c>>l&1;s!==n[0]&&(s=this.sqr(s)),0!==d||0!==o?(o<<=1,o|=d,(4===++a||0===r&&0===l)&&(s=this.mul(s,n[o]),a=0,o=0)):a=0}u=26}return s},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new A(e)},r(A,k),A.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},A.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},A.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=n.isub(r).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},A.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(ai,Bt);var ci=ai.exports;const li=Ot(ci);var di={exports:{}};
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */!function(e,t){var n=Tt,r=n.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),s.prototype=Object.create(r.prototype),i(r,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}(di,di.exports);var hi=di.exports.Buffer;var fi=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=r}var o=e.length,a=e.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return hi.alloc(0);for(var n=0,r=0,i=0;e[n]===a;)r++,n++;for(var s=(e.length-n)*u+1>>>0,c=new Uint8Array(s);n<e.length;){var l=e.charCodeAt(n);if(l>255)return;var d=t[l];if(255===d)return;for(var h=0,f=s-1;(0!==d||h<i)&&-1!==f;f--,h++)d+=o*c[f]>>>0,c[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=h,n++}for(var p=s-i;p!==s&&0===c[p];)p++;var m=hi.allocUnsafe(r+(s-p));m.fill(0,0,r);for(var g=r;p!==s;)m[g++]=c[p++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=hi.from(t)),!hi.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,r=0,i=0,s=t.length;i!==s&&0===t[i];)i++,n++;for(var u=(s-i)*c+1>>>0,l=new Uint8Array(u);i!==s;){for(var d=t[i],h=0,f=u-1;(0!==d||h<r)&&-1!==f;f--,h++)d+=256*l[f]>>>0,l[f]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,i++}for(var p=u-r;p!==u&&0===l[p];)p++;for(var m=a.repeat(n);p<u;++p)m+=e.charAt(l[p]);return m},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+o+" character")}}},pi=fi("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const mi=Ot(pi),gi=Rn;var yi={};function vi(e,t,n){return t<=e&&e<=n}function wi(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function bi(e){this.tokens=[].slice.call(e)}bi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var _i=-1;function xi(e,t){if(e)throw TypeError("Decoder error");return t||65533}var Ei="utf-8";function ki(e,t){if(!(this instanceof ki))return new ki(e,t);if((e=void 0!==e?String(e).toLowerCase():Ei)!==Ei)throw new Error("Encoding not supported. Only utf-8 is supported");t=wi(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function Ai(e,t){if(!(this instanceof Ai))return new Ai(e,t);if((e=void 0!==e?String(e).toLowerCase():Ei)!==Ei)throw new Error("Encoding not supported. Only utf-8 is supported");t=wi(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function Si(e){var t=e.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(e,a){if(-1===a&&0!==i)return i=0,xi(t);if(-1===a)return _i;if(0===i){if(vi(a,0,127))return a;if(vi(a,194,223))i=1,n=a-192;else if(vi(a,224,239))224===a&&(s=160),237===a&&(o=159),i=2,n=a-224;else{if(!vi(a,240,244))return xi(t);240===a&&(s=144),244===a&&(o=143),i=3,n=a-240}return n<<=6*i,null}if(!vi(a,s,o))return n=i=r=0,s=128,o=191,e.prepend(a),xi(t);if(s=128,o=191,n+=a-128<<6*(i-(r+=1)),r!==i)return null;var u=n;return n=i=r=0,u}}function Mi(e){e.fatal,this.handler=function(e,t){if(-1===t)return _i;if(vi(t,0,127))return t;var n,r;vi(t,128,2047)?(n=1,r=192):vi(t,2048,65535)?(n=2,r=224):vi(t,65536,1114111)&&(n=3,r=240);for(var i=[(t>>6*n)+r];n>0;){var s=t>>6*(n-1);i.push(128|63&s),n-=1}return i}}ki.prototype={decode:function(e,t){var n;n="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=wi(t),this._streaming||(this._decoder=new Si({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var r,i=new bi(n),s=[];!i.endOfStream()&&(r=this._decoder.handler(i,i.read()))!==_i;)null!==r&&(Array.isArray(r)?s.push.apply(s,r):s.push(r));if(!this._streaming){do{if((r=this._decoder.handler(i,i.read()))===_i)break;null!==r&&(Array.isArray(r)?s.push.apply(s,r):s.push(r))}while(!i.endOfStream());this._decoder=null}return s.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===s[0]?(this._BOMseen=!0,s.shift()):this._BOMseen=!0)),function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}(s)}},Ai.prototype={encode:function(e,t){e=e?String(e):"",t=wi(t),this._streaming||(this._encoder=new Mi(this._options)),this._streaming=Boolean(t.stream);for(var n,r=[],i=new bi(function(e){for(var t=String(e),n=t.length,r=0,i=[];r<n;){var s=t.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=e.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=1023&s,u=1023&o;i.push(65536+(a<<10)+u),r+=1}else i.push(65533)}r+=1}return i}(e));!i.endOfStream()&&(n=this._encoder.handler(i,i.read()))!==_i;)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;(n=this._encoder.handler(i,i.read()))!==_i;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}};const Ii=Rt(Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ki,TextEncoder:Ai},Symbol.toStringTag,{value:"Module"})));var Bi=Bt&&Bt.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Oi=Bt&&Bt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ri=Bt&&Bt.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},Ti=Bt&&Bt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&Bi(t,e,n);return Oi(t,e),t},Li=Bt&&Bt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yi,"__esModule",{value:!0});var Pi=yi.deserializeUnchecked=Gi=yi.deserialize=Wi=yi.serialize=yi.BinaryReader=yi.BinaryWriter=yi.BorshError=yi.baseDecode=yi.baseEncode=void 0;const Ui=Li(ci),Ci=Li(pi),Ni=Ti(Ii),ji=new("function"!=typeof TextDecoder?Ni.TextDecoder:TextDecoder)("utf-8",{fatal:!0});yi.baseEncode=function(e){return"string"==typeof e&&(e=Buffer.from(e,"utf8")),Ci.default.encode(Buffer.from(e))},yi.baseDecode=function(e){return Buffer.from(Ci.default.decode(e))};const zi=1024;class $i extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}yi.BorshError=$i;class Fi{constructor(){this.buf=Buffer.alloc(zi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(zi)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ui.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ui.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ui.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ui.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(zi)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}}function Di(e,t,n){const r=n.value;n.value=function(...e){try{return r.apply(this,e)}catch(t){if(t instanceof RangeError){const e=t.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new $i("Reached the end of buffer when deserializing")}throw t}}}yi.BinaryWriter=Fi;class Zi{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Ui.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Ui.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Ui.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Ui.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new $i(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return ji.decode(t)}catch(n){throw new $i(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),n=Array();for(let r=0;r<t;++r)n.push(e());return n}}function qi(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ki(e,t,n,r,i){try{if("string"==typeof r)i[`write${qi(r)}`](n);else if(r instanceof Array)if("number"==typeof r[0]){if(n.length!==r[0])throw new $i(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(2===r.length&&"number"==typeof r[1]){if(n.length!==r[1])throw new $i(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let t=0;t<r[1];t++)Ki(e,null,n[t],r[0],i)}else i.writeArray(n,n=>{Ki(e,t,n,r[0],i)});else if(void 0!==r.kind)switch(r.kind){case"option":null==n?i.writeU8(0):(i.writeU8(1),Ki(e,t,n,r.type,i));break;case"map":i.writeU32(n.size),n.forEach((n,s)=>{Ki(e,t,s,r.key,i),Ki(e,t,n,r.value,i)});break;default:throw new $i(`FieldType ${r} unrecognized`)}else Vi(e,n,i)}catch(s){throw s instanceof $i&&s.addToFieldPath(t),s}}function Vi(e,t,n){if("function"==typeof t.borshSerialize)return void t.borshSerialize(n);const r=e.get(t.constructor);if(!r)throw new $i(`Class ${t.constructor.name} is missing in schema`);if("struct"===r.kind)r.fields.map(([r,i])=>{Ki(e,r,t[r],i,n)});else{if("enum"!==r.kind)throw new $i(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`);{const i=t[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){n.writeU8(s),Ki(e,o,t[o],a,n);break}}}}}Ri([Di],Zi.prototype,"readU8",null),Ri([Di],Zi.prototype,"readU16",null),Ri([Di],Zi.prototype,"readU32",null),Ri([Di],Zi.prototype,"readU64",null),Ri([Di],Zi.prototype,"readU128",null),Ri([Di],Zi.prototype,"readU256",null),Ri([Di],Zi.prototype,"readU512",null),Ri([Di],Zi.prototype,"readString",null),Ri([Di],Zi.prototype,"readFixedArray",null),Ri([Di],Zi.prototype,"readArray",null),yi.BinaryReader=Zi;var Wi=yi.serialize=function(e,t,n=Fi){const r=new n;return Vi(e,t,r),r.toArray()};function Hi(e,t,n,r){try{if("string"==typeof n)return r[`read${qi(n)}`]();if(n instanceof Array){if("number"==typeof n[0])return r.readFixedArray(n[0]);if("number"==typeof n[1]){const t=[];for(let i=0;i<n[1];i++)t.push(Hi(e,null,n[0],r));return t}return r.readArray(()=>Hi(e,t,n[0],r))}if("option"===n.kind){return r.readU8()?Hi(e,t,n.type,r):void 0}if("map"===n.kind){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const s=Hi(e,t,n.key,r),o=Hi(e,t,n.value,r);i.set(s,o)}return i}return Ji(e,n,r)}catch(i){throw i instanceof $i&&i.addToFieldPath(t),i}}function Ji(e,t,n){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(n);const r=e.get(t);if(!r)throw new $i(`Class ${t.name} is missing in schema`);if("struct"===r.kind){const r={};for(const[i,s]of e.get(t).fields)r[i]=Hi(e,i,s,n);return new t(r)}if("enum"===r.kind){const i=n.readU8();if(i>=r.values.length)throw new $i(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=Hi(e,s,o,n);return new t({[s]:a})}throw new $i(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}var Gi=yi.deserialize=function(e,t,n,r=Zi){const i=new r(n),s=Ji(e,t,i);if(i.offset<n.length)throw new $i(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return s};Pi=yi.deserializeUnchecked=function(e,t,n,r=Zi){return Ji(e,t,new r(n))};var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.s16=Yi.s8=Yi.nu64be=Yi.u48be=Yi.u40be=Yi.u32be=Yi.u24be=Yi.u16be=zs=Yi.nu64=Yi.u48=Yi.u40=js=Yi.u32=Yi.u24=Ns=Yi.u16=Cs=Yi.u8=Us=Yi.offset=Yi.greedy=Yi.Constant=Yi.UTF8=Yi.CString=Yi.Blob=Yi.Boolean=Yi.BitField=Yi.BitStructure=Yi.VariantLayout=Yi.Union=Yi.UnionLayoutDiscriminator=Yi.UnionDiscriminator=Yi.Structure=Yi.Sequence=Yi.DoubleBE=Yi.Double=Yi.FloatBE=Yi.Float=Yi.NearInt64BE=Yi.NearInt64=Yi.NearUInt64BE=Yi.NearUInt64=Yi.IntBE=Yi.Int=Yi.UIntBE=Yi.UInt=Yi.OffsetLayout=Yi.GreedyCount=Yi.ExternalLayout=Yi.bindConstructorLayout=Yi.nameWithProperty=Yi.Layout=Yi.uint8ArrayToBuffer=Yi.checkUint8Array=void 0,Yi.constant=Yi.utf8=Yi.cstr=Zs=Yi.blob=Yi.unionLayoutDiscriminator=Yi.union=Ds=Yi.seq=Yi.bits=Fs=Yi.struct=Yi.f64be=Yi.f64=Yi.f32be=Yi.f32=Yi.ns64be=Yi.s48be=Yi.s40be=Yi.s32be=Yi.s24be=Yi.s16be=$s=Yi.ns64=Yi.s48=Yi.s40=Yi.s32=Yi.s24=void 0;const Xi=Tt;function Qi(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function es(e){return Qi(e),Xi.Buffer.from(e.buffer,e.byteOffset,e.length)}Yi.checkUint8Array=Qi,Yi.uint8ArrayToBuffer=es;class ts{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function ns(e,t){return t.property?e+"["+t.property+"]":e}Yi.Layout=ts,Yi.nameWithProperty=ns,Yi.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof ts))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,n)=>t.decode(e,n),writable:!0})};class rs extends ts{isCount(){throw new Error("ExternalLayout is abstract")}}Yi.ExternalLayout=rs;class is extends rs{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Qi(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}Yi.GreedyCount=is;class ss extends rs{constructor(e,t=0,n){if(!(e instanceof ts))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof os||this.layout instanceof as}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}}Yi.OffsetLayout=ss;class os extends ts{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return es(e).readUIntLE(t,this.span)}encode(e,t,n=0){return es(t).writeUIntLE(e,n,this.span),this.span}}Yi.UInt=os;class as extends ts{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return es(e).readUIntBE(t,this.span)}encode(e,t,n=0){return es(t).writeUIntBE(e,n,this.span),this.span}}Yi.UIntBE=as;class us extends ts{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return es(e).readIntLE(t,this.span)}encode(e,t,n=0){return es(t).writeIntLE(e,n,this.span),this.span}}Yi.Int=us;class cs extends ts{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return es(e).readIntBE(t,this.span)}encode(e,t,n=0){return es(t).writeIntBE(e,n,this.span),this.span}}Yi.IntBE=cs;const ls=Math.pow(2,32);function ds(e){const t=Math.floor(e/ls);return{hi32:t,lo32:e-t*ls}}function hs(e,t){return e*ls+t}class fs extends ts{constructor(e){super(8,e)}decode(e,t=0){const n=es(e),r=n.readUInt32LE(t);return hs(n.readUInt32LE(t+4),r)}encode(e,t,n=0){const r=ds(e),i=es(t);return i.writeUInt32LE(r.lo32,n),i.writeUInt32LE(r.hi32,n+4),8}}Yi.NearUInt64=fs;class ps extends ts{constructor(e){super(8,e)}decode(e,t=0){const n=es(e);return hs(n.readUInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){const r=ds(e),i=es(t);return i.writeUInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}Yi.NearUInt64BE=ps;class ms extends ts{constructor(e){super(8,e)}decode(e,t=0){const n=es(e),r=n.readUInt32LE(t);return hs(n.readInt32LE(t+4),r)}encode(e,t,n=0){const r=ds(e),i=es(t);return i.writeUInt32LE(r.lo32,n),i.writeInt32LE(r.hi32,n+4),8}}Yi.NearInt64=ms;class gs extends ts{constructor(e){super(8,e)}decode(e,t=0){const n=es(e);return hs(n.readInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){const r=ds(e),i=es(t);return i.writeInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}Yi.NearInt64BE=gs;class ys extends ts{constructor(e){super(4,e)}decode(e,t=0){return es(e).readFloatLE(t)}encode(e,t,n=0){return es(t).writeFloatLE(e,n),4}}Yi.Float=ys;class vs extends ts{constructor(e){super(4,e)}decode(e,t=0){return es(e).readFloatBE(t)}encode(e,t,n=0){return es(t).writeFloatBE(e,n),4}}Yi.FloatBE=vs;class ws extends ts{constructor(e){super(8,e)}decode(e,t=0){return es(e).readDoubleLE(t)}encode(e,t,n=0){return es(t).writeDoubleLE(e,n),8}}Yi.Double=ws;class bs extends ts{constructor(e){super(8,e)}decode(e,t=0){return es(e).readDoubleBE(t)}encode(e,t,n=0){return es(t).writeDoubleBE(e,n),8}}Yi.DoubleBE=bs;class _s extends ts{constructor(e,t,n){if(!(e instanceof ts))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof rs&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(t instanceof rs)&&0<e.span&&(r=t*e.span),super(r,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof rs&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let i=0;for(;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i}return n}decode(e,t=0){const n=[];let r=0,i=this.count;for(i instanceof rs&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}encode(e,t,n=0){const r=this.elementLayout,i=e.reduce((e,i)=>e+r.encode(i,t,n+e),0);return this.count instanceof rs&&this.count.encode(e.length,t,n),i}}Yi.Sequence=_s;class xs extends ts{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce((e,t)=>e&&t instanceof ts,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const s of e)if(0>s.span&&void 0===s.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce((e,t)=>e+t.getSpan(),0)}catch(i){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((n,r)=>{const i=r.getSpan(e,t);return t+=i,n+i},0)}catch(r){throw new RangeError("indeterminate span")}return n}decode(e,t=0){Qi(e);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const r=n;let i=0,s=0;for(const o of this.fields){let r=o.span;if(s=0<r?r:0,void 0!==o.property){const i=e[o.property];void 0!==i&&(s=o.encode(i,t,n),0>r&&(r=o.getSpan(t,n)))}i=n,n+=r}return i+s-r}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}Yi.Structure=xs;class Es{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}}Yi.UnionDiscriminator=Es;class ks extends Es{constructor(e,t){if(!(e instanceof rs&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}Yi.UnionLayoutDiscriminator=ks;class As extends ts{constructor(e,t,n){let r;if(e instanceof os||e instanceof as)r=new ks(new ss(e));else if(e instanceof rs&&e.isCount())r=new ks(e);else{if(!(e instanceof Es))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=e}if(void 0===t&&(t=null),!(null===t||t instanceof ts))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof os||e instanceof as)&&(i+=r.layout.span)),super(i,n),this.discriminator=r,this.usesPrefixDiscriminator=e instanceof os||e instanceof as,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return s(e)},this.configGetSourceVariant=function(e){s=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const r=this.discriminator,i=r.decode(e,t),s=this.registry[i];if(void 0===s){const s=this.defaultLayout;let o=0;this.usesPrefixDiscriminator&&(o=r.layout.span),n=this.makeDestinationObject(),n[r.property]=i,n[s.property]=s.decode(e,t+o)}else n=s.decode(e,t);return n}encode(e,t,n=0){const r=this.getSourceVariant(e);if(void 0===r){const r=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=r.layout.span),r.encode(e[r.property],t,n),s+i.encode(e[i.property],t,n+s)}return r.encode(e,t,n)}addVariant(e,t,n){const r=new Ss(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t=0){let n;return n=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[n]}}Yi.Union=As;class Ss extends ts{constructor(e,t,n,r){if(!(e instanceof As))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof ts))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(e,t+n)),n+r}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function Ms(e){return 0>e&&(e+=4294967296),e}Yi.VariantLayout=Ss;class Is extends ts{constructor(e,t,n){if(!(e instanceof os||e instanceof as))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===n&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let r=0;this._packedSetValue=function(e){return r=Ms(e),this},this._packedGetValue=function(){return r}}decode(e,t=0){const n=this.makeDestinationObject(),r=this.word.decode(e,t);this._packedSetValue(r);for(const i of this.fields)void 0!==i.property&&(n[i.property]=i.decode(e));return n}encode(e,t,n=0){const r=this.word.decode(t,n);this._packedSetValue(r);for(const i of this.fields)if(void 0!==i.property){const t=e[i.property];void 0!==t&&i.encode(t)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new Bs(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new Os(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}Yi.BitStructure=Is;class Bs{constructor(e,t,n){if(!(e instanceof Is))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const r=8*e.span,i=e.fields.reduce((e,t)=>e+t.bits,0);if(t+i>r)throw new Error("bits too long for span remainder ("+(r-i)+" of "+r+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=r-i-t),this.wordMask=Ms(this.valueMask<<this.start),this.property=n}decode(e,t){return Ms(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==Ms(e&this.valueMask))throw new TypeError(ns("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=Ms(e<<this.start);this.container._packedSetValue(Ms(t&~this.wordMask)|n)}}Yi.BitField=Bs;let Os=class extends Bs{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}};Yi.Boolean=Os;class Rs extends ts{constructor(e,t){if(!(e instanceof rs&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof rs||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),es(e).slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof rs&&(r=e.length),!(e instanceof Uint8Array&&r===e.length))throw new TypeError(ns("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>t.length)throw new RangeError("encoding overruns Uint8Array");const i=es(e);return es(t).write(i.toString("hex"),n,r,"hex"),this.length instanceof rs&&this.length.encode(r,t,n),r}}Yi.Blob=Rs;class Ts extends ts{constructor(e){super(-1,e)}getSpan(e,t=0){Qi(e);let n=t;for(;n<e.length&&0!==e[n];)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return es(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){"string"!=typeof e&&(e=String(e));const r=Xi.Buffer.from(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");const s=es(t);return r.copy(s,n),s[n+i]=0,i+1}}Yi.CString=Ts;class Ls extends ts{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Qi(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return es(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){"string"!=typeof e&&(e=String(e));const r=Xi.Buffer.from(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(es(t),n),i}}Yi.UTF8=Ls;class Ps extends ts{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}}Yi.Constant=Ps,Yi.greedy=(e,t)=>new is(e,t);var Us=Yi.offset=(e,t,n)=>new ss(e,t,n),Cs=Yi.u8=e=>new os(1,e),Ns=Yi.u16=e=>new os(2,e);Yi.u24=e=>new os(3,e);var js=Yi.u32=e=>new os(4,e);Yi.u40=e=>new os(5,e),Yi.u48=e=>new os(6,e);var zs=Yi.nu64=e=>new fs(e);Yi.u16be=e=>new as(2,e),Yi.u24be=e=>new as(3,e),Yi.u32be=e=>new as(4,e),Yi.u40be=e=>new as(5,e),Yi.u48be=e=>new as(6,e),Yi.nu64be=e=>new ps(e),Yi.s8=e=>new us(1,e),Yi.s16=e=>new us(2,e),Yi.s24=e=>new us(3,e),Yi.s32=e=>new us(4,e),Yi.s40=e=>new us(5,e),Yi.s48=e=>new us(6,e);var $s=Yi.ns64=e=>new ms(e);Yi.s16be=e=>new cs(2,e),Yi.s24be=e=>new cs(3,e),Yi.s32be=e=>new cs(4,e),Yi.s40be=e=>new cs(5,e),Yi.s48be=e=>new cs(6,e),Yi.ns64be=e=>new gs(e),Yi.f32=e=>new ys(e),Yi.f32be=e=>new vs(e),Yi.f64=e=>new ws(e),Yi.f64be=e=>new bs(e);var Fs=Yi.struct=(e,t,n)=>new xs(e,t,n);Yi.bits=(e,t,n)=>new Is(e,t,n);var Ds=Yi.seq=(e,t,n)=>new _s(e,t,n);Yi.union=(e,t,n)=>new As(e,t,n),Yi.unionLayoutDiscriminator=(e,t)=>new ks(e,t);var Zs=Yi.blob=(e,t)=>new Rs(e,t);Yi.cstr=e=>new Ts(e),Yi.utf8=(e,t)=>new Ls(e,t),Yi.constant=(e,t)=>new Ps(e,t);function qs(e){if(Array.isArray(e)){return"%5B"+e.map(qs).join("%2C%20")+"%5D"}return"bigint"==typeof e?`${e}n`:encodeURIComponent(String(null!=e&&null===Object.getPrototypeOf(e)?{...e}:e))}function Ks([e,t]){return`${e}=${qs(t)}`}function Vs(e,t={}){{let n=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(n+=` '${function(e){const t=Object.entries(e).map(Ks).join("&");return btoa(t)}(t)}'`),`${n}\``}}var Ws=class extends Error{constructor(...[e,n]){let r,i;if(n){const{cause:e,...t}=n;e&&(i={cause:e}),Object.keys(t).length>0&&(r=t)}super(Vs(e,r),i),t(this,"cause",this.cause),t(this,"context"),this.context={__code:e,...r},this.name="SolanaError"}};function Hs(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}function Js(e){return 1!==e?.endian}function Gs(e){return t={fixedSize:e.size,write(t,n,r){e.range&&function(e,t,n,r){if(r<t||r>n)throw new Ws(8078011,{codecDescription:e,max:n,min:t,value:r})}(e.name,e.range[0],e.range[1],t);const i=new ArrayBuffer(e.size);return e.set(new DataView(i),t,Js(e.config)),n.set(new Uint8Array(i),r),r+e.size}},Object.freeze({...t,encode:e=>{const n=new Uint8Array(function(e,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(e)}(e,t));return t.write(e,n,0),n}});var t}function Ys(e){return t={fixedSize:e.size,read(t,n=0){!function(e,t,n=0){if(t.length-n<=0)throw new Ws(8078e3,{codecDescription:e})}(e.name,t,n),function(e,t,n,r=0){const i=n.length-r;if(i<t)throw new Ws(8078001,{bytesLength:i,codecDescription:e,expected:t})}(e.name,e.size,t,n);const r=new DataView(function(e,t,n){const r=e.byteOffset+(t??0),i=n??e.byteLength;return e.buffer.slice(r,r+i)}(t,n,e.size));return[e.get(r,Js(e.config)),n+e.size]}},Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]});var t}var Xs=(e={})=>function(e,t){if(Hs(e)!==Hs(t))throw new Ws(8078004);if(Hs(e)&&Hs(t)&&e.fixedSize!==t.fixedSize)throw new Ws(8078005,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!Hs(e)&&!Hs(t)&&e.maxSize!==t.maxSize)throw new Ws(8078006,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}}(((e={})=>Gs({config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}))(e),((e={})=>Ys({config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}))(e));class Qs extends TypeError{constructor(e,t){let n;const{message:r,explanation:i,...s}=e,{path:o}=e,a=0===o.length?r:`At path: ${o.join(".")} -- ${r}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function eo(e){return"object"==typeof e&&null!=e}function to(e){return eo(e)&&!Array.isArray(e)}function no(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function ro(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=n,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${no(r)}\``}=e;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:u}}function*io(e,t,n,r){var i;eo(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]);for(const s of e){const e=ro(s,t,n,r);e&&(yield e)}}function*so(e,t,n={}){const{path:r=[],branch:i=[e],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(e=t.coercer(e,a));let u="valid";for(const c of t.validator(e,a))c.explanation=n.message,u="not_valid",yield[c,void 0];for(let[c,l,d]of t.entries(e,a)){const t=so(l,d,{path:void 0===c?r:[...r,c],branch:void 0===c?i:[...i,l],coerce:s,mask:o,message:n.message});for(const n of t)n[0]?(u=null!=n[0].refinement?"not_refined":"not_valid",yield[n[0],void 0]):s&&(l=n[1],void 0===c?e=l:e instanceof Map?e.set(c,l):e instanceof Set?e.add(l):eo(e)&&(void 0!==l||c in e)&&(e[c]=l))}if("not_valid"!==u)for(const c of t.refiner(e,a))c.explanation=n.message,u="not_refined",yield[c,void 0];"valid"===u&&(yield[void 0,e])}let oo=class{constructor(e){const{type:t,schema:n,validator:r,refiner:i,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=n,this.entries=o,this.coercer=s,this.validator=r?(e,t)=>io(r(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>io(i(e,t),t,this,e):()=>[]}assert(e,t){return function(e,t,n){const r=co(e,t,{message:n});if(r[0])throw r[0]}(e,this,t)}create(e,t){return ao(e,this,t)}is(e){return uo(e,this)}mask(e,t){return function(e,t,n){const r=co(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(e,this,t)}validate(e,t={}){return co(e,this,t)}};function ao(e,t,n){const r=co(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function uo(e,t){return!co(e,t)[0]}function co(e,t,n={}){const r=so(e,t,n),i=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(r);if(i[0]){return[new Qs(i[0],function*(){for(const e of r)e[0]&&(yield e[0])}),void 0]}return[void 0,i[1]]}function lo(e,t){return new oo({type:e,schema:null,validator:t})}function ho(e){return new oo({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${no(e)}`})}function fo(){return lo("boolean",e=>"boolean"==typeof e)}function po(e){return lo("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${no(t)}`)}function mo(e){const t=no(e),n=typeof e;return new oo({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${no(n)}`})}function go(e){return new oo({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function yo(){return lo("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${no(e)}`)}function vo(e){return new oo({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function wo(e,t){return new oo({type:"record",schema:null,*entries(n){if(eo(n))for(const r in n){const i=n[r];yield[r,r,e],yield[r,i,t]}},validator:e=>to(e)||`Expected an object, but received: ${no(e)}`,coercer:e=>to(e)?{...e}:e})}function bo(){return lo("string",e=>"string"==typeof e||`Expected a string, but received: ${no(e)}`)}function _o(e){const t=lo("never",()=>!1);return new oo({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${no(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function xo(e){const t=Object.keys(e);return new oo({type:"type",schema:e,*entries(n){if(eo(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>to(e)||`Expected an object, but received: ${no(e)}`,coercer:e=>to(e)?{...e}:e})}function Eo(e){const t=e.map(e=>e.type).join(" | ");return new oo({type:"union",schema:null,coercer(t,n){for(const r of e){const[e,i]=r.validate(t,{coerce:!0,mask:n.mask});if(!e)return i}return t},validator(n,r){const i=[];for(const t of e){const[...e]=so(n,t,r),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${no(n)}`,...i]}})}function ko(){return lo("unknown",()=>!0)}function Ao(e,t,n){return new oo({...e,coercer:(r,i)=>uo(r,t)?e.coercer(n(r,i),i):e.coercer(r,i)})}var So,Mo=new Uint8Array(16);function Io(){if(!So&&!(So="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return So(Mo)}const Bo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Oo(e){return"string"==typeof e&&Bo.test(e)}for(var Ro,To,Lo=[],Po=0;Po<256;++Po)Lo.push((Po+256).toString(16).substr(1));function Uo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Lo[e[t+0]]+Lo[e[t+1]]+Lo[e[t+2]]+Lo[e[t+3]]+"-"+Lo[e[t+4]]+Lo[e[t+5]]+"-"+Lo[e[t+6]]+Lo[e[t+7]]+"-"+Lo[e[t+8]]+Lo[e[t+9]]+"-"+Lo[e[t+10]]+Lo[e[t+11]]+Lo[e[t+12]]+Lo[e[t+13]]+Lo[e[t+14]]+Lo[e[t+15]]).toLowerCase();if(!Oo(n))throw TypeError("Stringified UUID is invalid");return n}var Co=0,No=0;function jo(e){if(!Oo(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function zo(e,t,n){function r(e,r,i,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=jo(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(r),o.set(e,r.length),(o=n(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,i){s=s||0;for(var a=0;a<16;++a)i[s+a]=o[a];return i}return Uo(o)}try{r.name=e}catch(i){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function $o(e){return 14+(e+64>>>9<<4)+1}function Fo(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Do(e,t,n,r,i,s){return Fo((o=Fo(Fo(t,e),Fo(r,s)))<<(a=i)|o>>>32-a,n);var o,a}function Zo(e,t,n,r,i,s,o){return Do(t&n|~t&r,e,t,i,s,o)}function qo(e,t,n,r,i,s,o){return Do(t&r|n&~r,e,t,i,s,o)}function Ko(e,t,n,r,i,s,o){return Do(t^n^r,e,t,i,s,o)}function Vo(e,t,n,r,i,s,o){return Do(n^(t|~r),e,t,i,s,o)}var Wo=zo("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var s=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(15&s),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[$o(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<e.length;o+=16){var a=n,u=r,c=i,l=s;n=Zo(n,r,i,s,e[o],7,-680876936),s=Zo(s,n,r,i,e[o+1],12,-389564586),i=Zo(i,s,n,r,e[o+2],17,606105819),r=Zo(r,i,s,n,e[o+3],22,-1044525330),n=Zo(n,r,i,s,e[o+4],7,-176418897),s=Zo(s,n,r,i,e[o+5],12,1200080426),i=Zo(i,s,n,r,e[o+6],17,-1473231341),r=Zo(r,i,s,n,e[o+7],22,-45705983),n=Zo(n,r,i,s,e[o+8],7,1770035416),s=Zo(s,n,r,i,e[o+9],12,-1958414417),i=Zo(i,s,n,r,e[o+10],17,-42063),r=Zo(r,i,s,n,e[o+11],22,-1990404162),n=Zo(n,r,i,s,e[o+12],7,1804603682),s=Zo(s,n,r,i,e[o+13],12,-40341101),i=Zo(i,s,n,r,e[o+14],17,-1502002290),n=qo(n,r=Zo(r,i,s,n,e[o+15],22,1236535329),i,s,e[o+1],5,-165796510),s=qo(s,n,r,i,e[o+6],9,-1069501632),i=qo(i,s,n,r,e[o+11],14,643717713),r=qo(r,i,s,n,e[o],20,-373897302),n=qo(n,r,i,s,e[o+5],5,-701558691),s=qo(s,n,r,i,e[o+10],9,38016083),i=qo(i,s,n,r,e[o+15],14,-660478335),r=qo(r,i,s,n,e[o+4],20,-405537848),n=qo(n,r,i,s,e[o+9],5,568446438),s=qo(s,n,r,i,e[o+14],9,-1019803690),i=qo(i,s,n,r,e[o+3],14,-187363961),r=qo(r,i,s,n,e[o+8],20,1163531501),n=qo(n,r,i,s,e[o+13],5,-1444681467),s=qo(s,n,r,i,e[o+2],9,-51403784),i=qo(i,s,n,r,e[o+7],14,1735328473),n=Ko(n,r=qo(r,i,s,n,e[o+12],20,-1926607734),i,s,e[o+5],4,-378558),s=Ko(s,n,r,i,e[o+8],11,-2022574463),i=Ko(i,s,n,r,e[o+11],16,1839030562),r=Ko(r,i,s,n,e[o+14],23,-35309556),n=Ko(n,r,i,s,e[o+1],4,-1530992060),s=Ko(s,n,r,i,e[o+4],11,1272893353),i=Ko(i,s,n,r,e[o+7],16,-155497632),r=Ko(r,i,s,n,e[o+10],23,-1094730640),n=Ko(n,r,i,s,e[o+13],4,681279174),s=Ko(s,n,r,i,e[o],11,-358537222),i=Ko(i,s,n,r,e[o+3],16,-722521979),r=Ko(r,i,s,n,e[o+6],23,76029189),n=Ko(n,r,i,s,e[o+9],4,-640364487),s=Ko(s,n,r,i,e[o+12],11,-421815835),i=Ko(i,s,n,r,e[o+15],16,530742520),n=Vo(n,r=Ko(r,i,s,n,e[o+2],23,-995338651),i,s,e[o],6,-198630844),s=Vo(s,n,r,i,e[o+7],10,1126891415),i=Vo(i,s,n,r,e[o+14],15,-1416354905),r=Vo(r,i,s,n,e[o+5],21,-57434055),n=Vo(n,r,i,s,e[o+12],6,1700485571),s=Vo(s,n,r,i,e[o+3],10,-1894986606),i=Vo(i,s,n,r,e[o+10],15,-1051523),r=Vo(r,i,s,n,e[o+1],21,-2054922799),n=Vo(n,r,i,s,e[o+8],6,1873313359),s=Vo(s,n,r,i,e[o+15],10,-30611744),i=Vo(i,s,n,r,e[o+6],15,-1560198380),r=Vo(r,i,s,n,e[o+13],21,1309151649),n=Vo(n,r,i,s,e[o+4],6,-145523070),s=Vo(s,n,r,i,e[o+11],10,-1120210379),i=Vo(i,s,n,r,e[o+2],15,718787259),r=Vo(r,i,s,n,e[o+9],21,-343485551),n=Fo(n,a),r=Fo(r,u),i=Fo(i,c),s=Fo(s,l)}return[n,r,i,s]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array($o(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))});function Ho(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function Jo(e,t){return e<<t|e>>>32-t}var Go=zo("v5",80,function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,o=Math.ceil(s/16),a=new Array(o),u=0;u<o;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[64*u+4*l]<<24|e[64*u+4*l+1]<<16|e[64*u+4*l+2]<<8|e[64*u+4*l+3];a[u]=c}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var p=16;p<80;++p)h[p]=Jo(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var m=n[0],g=n[1],y=n[2],v=n[3],w=n[4],b=0;b<80;++b){var _=Math.floor(b/20),x=Jo(m,5)+Ho(_,g,y,v)+w+t[_]+h[b]>>>0;w=v,v=y,y=Jo(g,30)>>>0,g=m,m=x}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]});const Yo=Object.freeze(Object.defineProperty({__proto__:null,NIL:"00000000-0000-0000-0000-000000000000",parse:jo,stringify:Uo,v1:function(e,t,n){var r=t&&n||0,i=t||new Array(16),s=(e=e||{}).node||Ro,o=void 0!==e.clockseq?e.clockseq:To;if(null==s||null==o){var a=e.random||(e.rng||Io)();null==s&&(s=Ro=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=To=16383&(a[6]<<8|a[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:No+1,l=u-Co+(c-No)/1e4;if(l<0&&void 0===e.clockseq&&(o=o+1&16383),(l<0||u>Co)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Co=u,No=c,To=o;var d=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=255&d;var h=u/4294967296*1e4&268435455;i[r++]=h>>>8&255,i[r++]=255&h,i[r++]=h>>>24&15|16,i[r++]=h>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var f=0;f<6;++f)i[r+f]=s[f];return t||Uo(i)},v3:Wo,v4:function(e,t,n){var r=(e=e||{}).random||(e.rng||Io)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Uo(r)},v5:Go,validate:Oo,version:function(e){if(!Oo(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},Symbol.toStringTag,{value:"Module"})),Xo=Rt(Yo),Qo=Xo.v4;var ea=function(e,t,n,r){if("string"!=typeof e)throw new TypeError(e+" must be a string");const i="number"==typeof(r=r||{}).version?r.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");const s={method:e};if(2===i&&(s.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(void 0===n){const e="function"==typeof r.generator?r.generator:function(){return Qo()};s.id=e(s,r)}else 2===i&&null===n?r.notificationIdNull&&(s.id=null):s.id=n;return s};const ta=Xo.v4,na=ea,ra=function(e,t){if(!(this instanceof ra))return new ra(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return ta()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};ra.prototype.request=function(e,t,n,r){const i=this;let s=null;const o=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&e&&"object"==typeof e&&"function"==typeof t)r=t,s=e;else{"function"==typeof n&&(r=n,n=void 0);const i="function"==typeof r;try{s=na(e,t,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(i)return void r(u);throw u}if(!i)return s}let a;try{a=JSON.stringify(s,this.options.replacer)}catch(u){return void r(u)}return this.callServer(a,function(e,t){i._parseResponse(e,t,r)}),s},ra.prototype._parseResponse=function(e,t,n){if(e)return void n(e);if(!t)return void n();let r;try{r=JSON.parse(t,this.options.reviver)}catch(i){return void n(i)}if(3!==n.length)n(null,r);else{if(Array.isArray(r)){const e=function(e){return void 0!==e.error},t=function(t){return!e(t)};return void n(null,r.filter(e),r.filter(t))}n(null,r.error,r.result)}};var ia={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,s||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,s,o){var a=n?n+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,s),!0;case 6:return l.fn.call(l.context,t,r,i,s,o),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(h=1,u=new Array(d-1);h<d;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||o(this,s);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||r&&a[u].context!==r)&&c.push(a[u]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(ia);const sa=Ot(ia.exports);class oa extends Yt{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");qt(e.outputLen),qt(e.blockLen)}(e);const n=Gt(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),Wt(i)}update(e){return Vt(this),this.iHash.update(e),this}digestInto(e){Vt(this),Kt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const aa=(e,t,n)=>new oa(e,t).update(n).digest();
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function ua(e){void 0!==e.lowS&&Nn("lowS",e.lowS),void 0!==e.prehash&&Nn("prehash",e.prehash)}aa.create=(e,t)=>new oa(e,t);class ca extends Error{constructor(e=""){super(e)}}const la={Err:ca,_tlv:{encode:(e,t)=>{const{Err:n}=la;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=jn(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?jn(i.length/2|128):"";return jn(e)+s+i+t},decode(e,t){const{Err:n}=la;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++];let s=0;if(!!(128&i)){const e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const o=t.subarray(r,r+e);if(o.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of o)s=s<<8|t;if(r+=e,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const o=t.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=la;if(e<ha)throw new t("integer: negative integers are not allowed");let n=jn(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=la;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return Yn(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=la,i=tr("signature",e),{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=r.decode(2,s),{v:c,l:l}=r.decode(2,u);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(e){const{_tlv:t,_int:n}=la,r=t.encode(2,n.encode(e.r))+t.encode(2,n.encode(e.s));return t.encode(48,r)}};function da(e,t){return Dn(Qn(e,t))}const ha=BigInt(0),fa=BigInt(1);BigInt(2);const pa=BigInt(3),ma=BigInt(4);function ga(e){const t=function(e){const t=Zr(e);lr(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}(e),{Fp:n}=t,r=Br(t.n,t.nBitLength),i=t.toBytes||((e,t,r)=>{const i=t.toAffine();return nr(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,s=n.sqr(e),o=n.mul(s,e);return n.add(n.add(o,n.mul(e,r)),i)}function a(e,t){const r=n.sqr(t),i=o(e);return n.eql(r,i)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const u=n.mul(n.pow(t.a,pa),ma),c=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(u,c)))throw new Error("bad curve params: a or b");function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=t;if(n&&"bigint"!=typeof e){if(Un(e)&&(e=Dn(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*r,"0")}let o;try{o="bigint"==typeof e?e:Yn(tr("private key",e,r))}catch(a){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof e)}return i&&(o=wr(o,s)),sr("private key",o,fa,s),o}function d(e){if(!(e instanceof p))throw new Error("ProjectivePoint expected")}const h=dr((e,t)=>{const{px:r,py:i,pz:s}=e;if(n.eql(s,n.ONE))return{x:r,y:i};const o=e.is0();null==t&&(t=o?n.ONE:n.inv(s));const a=n.mul(r,t),u=n.mul(i,t),c=n.mul(s,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:a,y:u}}),f=dr(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=e.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");if(!a(r,i))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(e,t,r){if(null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t)||n.is0(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");this.px=e,this.py=t,this.pz=r,Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof p)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?p.ZERO:new p(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=Sr(n,e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(p.fromAffine)}static fromHex(e){const t=p.fromAffine(s(tr("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return p.BASE.multiply(l(e))}static msm(e,t){return Dr(p,r,e,t)}_setWindowSize(e){y.setWindowSize(this,e)}assertValidity(){f(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){d(e);const{px:t,py:r,pz:i}=this,{px:s,py:o,pz:a}=e,u=n.eql(n.mul(t,a),n.mul(s,i)),c=n.eql(n.mul(r,a),n.mul(o,i));return u&&c}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,pa),{px:s,py:o,pz:a}=this;let u=n.ZERO,c=n.ZERO,l=n.ZERO,d=n.mul(s,s),h=n.mul(o,o),f=n.mul(a,a),m=n.mul(s,o);return m=n.add(m,m),l=n.mul(s,a),l=n.add(l,l),u=n.mul(e,l),c=n.mul(i,f),c=n.add(u,c),u=n.sub(h,c),c=n.add(h,c),c=n.mul(u,c),u=n.mul(m,u),l=n.mul(i,l),f=n.mul(e,f),m=n.sub(d,f),m=n.mul(e,m),m=n.add(m,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,f),d=n.mul(d,m),c=n.add(c,d),f=n.mul(o,a),f=n.add(f,f),d=n.mul(f,m),u=n.sub(u,d),l=n.mul(f,h),l=n.add(l,l),l=n.add(l,l),new p(u,c,l)}add(e){d(e);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:u}=e;let c=n.ZERO,l=n.ZERO,h=n.ZERO;const f=t.a,m=n.mul(t.b,pa);let g=n.mul(r,o),y=n.mul(i,a),v=n.mul(s,u),w=n.add(r,i),b=n.add(o,a);w=n.mul(w,b),b=n.add(g,y),w=n.sub(w,b),b=n.add(r,s);let _=n.add(o,u);return b=n.mul(b,_),_=n.add(g,v),b=n.sub(b,_),_=n.add(i,s),c=n.add(a,u),_=n.mul(_,c),c=n.add(y,v),_=n.sub(_,c),h=n.mul(f,b),c=n.mul(m,v),h=n.add(c,h),c=n.sub(y,h),h=n.add(y,h),l=n.mul(c,h),y=n.add(g,g),y=n.add(y,g),v=n.mul(f,v),b=n.mul(m,b),y=n.add(y,v),v=n.sub(g,v),v=n.mul(f,v),b=n.add(b,v),g=n.mul(y,b),l=n.add(l,g),g=n.mul(_,b),c=n.mul(w,c),c=n.sub(c,g),g=n.mul(w,y),h=n.mul(_,h),h=n.add(h,g),new p(c,l,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(p.ZERO)}wNAF(e){return y.wNAFCached(this,e,p.normalizeZ)}multiplyUnsafe(e){const{endo:r,n:i}=t;sr("scalar",e,ha,i);const s=p.ZERO;if(e===ha)return s;if(this.is0()||e===fa)return this;if(!r||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,e,p.normalizeZ);let{k1neg:o,k1:a,k2neg:u,k2:c}=r.splitScalar(e),l=s,d=s,h=this;for(;a>ha||c>ha;)a&fa&&(l=l.add(h)),c&fa&&(d=d.add(h)),h=h.double(),a>>=fa,c>>=fa;return o&&(l=l.negate()),u&&(d=d.negate()),d=new p(n.mul(d.px,r.beta),d.py,d.pz),l.add(d)}multiply(e){const{endo:r,n:i}=t;let s,o;if(sr("scalar",e,fa,i),r){const{k1neg:t,k1:i,k2neg:a,k2:u}=r.splitScalar(e);let{p:c,f:l}=this.wNAF(i),{p:d,f:h}=this.wNAF(u);c=y.constTimeNegate(t,c),d=y.constTimeNegate(a,d),d=new p(n.mul(d.px,r.beta),d.py,d.pz),s=c.add(d),o=l.add(h)}else{const{p:t,f:n}=this.wNAF(e);s=t,o=n}return p.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=p.BASE,i=(e,t)=>t!==ha&&t!==fa&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,n));return s.is0()?void 0:s}toAffine(e){return h(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===fa)return!0;if(n)return n(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===fa?this:n?n(p,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Nn("isCompressed",e),this.assertValidity(),i(p,this,e)}toHex(e=!0){return Nn("isCompressed",e),Dn(this.toRawBytes(e))}}p.BASE=new p(t.Gx,t.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const{endo:m,nBitLength:g}=t,y=Fr(p,m?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:function(e){return ir(e,fa,t.n)}}}function ya(e){const t=function(e){const t=Zr(e);return lr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r,nByteLength:i,nBitLength:s}=t,o=n.BYTES+1,a=2*n.BYTES+1;function u(e){return wr(e,r)}function c(e){return _r(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:f}=ga({...t,toBytes(e,t,r){const i=t.toAffine(),s=n.toBytes(i.x),o=nr;return Nn("isCompressed",r),r?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],i=e.subarray(1);if(t!==o||2!==r&&3!==r){if(t===a&&4===r){return{x:n.fromBytes(i.subarray(0,n.BYTES)),y:n.fromBytes(i.subarray(n.BYTES,2*n.BYTES))}}throw new Error("invalid Point, expected length of "+o+", or uncompressed "+a+", got "+t)}{const e=Yn(i);if(!ir(e,fa,n.ORDER))throw new Error("Point is not on curve");const t=h(e);let o;try{o=n.sqrt(t)}catch(s){const e=s instanceof Error?": "+s.message:"";throw new Error("Point is not on curve"+e)}return!(1&~r)!==((o&fa)===fa)&&(o=n.neg(o)),{x:e,y:o}}}});function p(e){return e>r>>fa}const m=(e,t,n)=>Yn(e.slice(t,n));class g{constructor(e,t,n){sr("r",e,fa,r),sr("s",t,fa,r),this.r=e,this.s=t,null!=n&&(this.recovery=n),Object.freeze(this)}static fromCompact(e){const t=i;return e=tr("compactSignature",e,2*t),new g(m(e,0,t),m(e,t,2*t))}static fromDER(e){const{r:t,s:n}=la.toSig(tr("DER",e));return new g(t,n)}assertValidity(){}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:s}=this,o=b(tr("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const a=2===s||3===s?r+t.n:r;if(a>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=1&s?"03":"02",h=l.fromHex(d+da(a,n.BYTES)),f=c(a),p=u(-o*f),m=u(i*f),g=l.BASE.multiplyAndAddUnsafe(h,p,m);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Gn(this.toDERHex())}toDERHex(){return la.hexFromSig(this)}toCompactRawBytes(){return Gn(this.toCompactHex())}toCompactHex(){const e=i;return da(this.r,e)+da(this.s,e)}}const y={isValidPrivateKey(e){try{return d(e),!0}catch(t){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const e=Rr(t.n);return function(e,t,n=!1){const r=e.length,i=Or(t),s=Rr(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=wr(n?Xn(e):Yn(e),t-fr)+fr;return n?er(o,i):Qn(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function v(e){if("bigint"==typeof e)return!1;if(e instanceof l)return!0;const r=tr("key",e).length,s=n.BYTES,o=s+1,a=2*s+1;return t.allowedPrivateKeyLengths||i===o?void 0:r===o||r===a}const w=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=Yn(e),n=8*e.length-s;return n>0?t>>BigInt(n):t},b=t.bits2int_modN||function(e){return u(w(e))},_=or(s);function x(e){return sr("num < 2^"+s,e,ha,_),Qn(e,i)}function E(e,r,i=k){if(["recovered","canonical"].some(e=>e in i))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:o}=t;let{lowS:a,prehash:h,extraEntropy:m}=i;null==a&&(a=!0),e=tr("msgHash",e),ua(i),h&&(e=tr("prehashed msgHash",s(e)));const y=b(e),v=d(r),_=[x(v),x(y)];if(null!=m&&!1!==m){const e=!0===m?o(n.BYTES):m;_.push(tr("extraEntropy",e))}const E=nr(..._),A=y;return{seed:E,k2sig:function(e){const t=w(e);if(!f(t))return;const n=c(t),r=l.BASE.multiply(t).toAffine(),i=u(r.x);if(i===ha)return;const s=u(n*u(A+i*v));if(s===ha)return;let o=(r.x===i?0:2)|Number(r.y&fa),d=s;return a&&p(s)&&(d=function(e){return p(e)?u(-e):e}(s),o^=1),new g(i,d,o)}}}const k={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(!0===v(e))throw new Error("first arg must be private key");if(!1===v(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(d(e)).toRawBytes(n)},sign:function(e,n,r=k){const{seed:i,k2sig:s}=E(e,n,r),o=t,a=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=ar(e),i=ar(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...e)=>n(i,r,...e),u=(e=ar(0))=>{i=a(ur([0]),e),r=a(),0!==e.length&&(i=a(ur([1]),e),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return nr(...n)};return(e,t)=>{let n;for(o(),u(e);!(n=t(c()));)u();return o(),n}}(o.hash.outputLen,o.nByteLength,o.hmac);return a(i,s)},verify:function(e,n,r,i=A){const s=e;n=tr("msgHash",n),r=tr("publicKey",r);const{lowS:o,prehash:a,format:d}=i;if(ua(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");const h="string"==typeof s||Un(s),f=!h&&!d&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!h&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,m;try{if(f&&(p=new g(s.r,s.s)),h){try{"compact"!==d&&(p=g.fromDER(s))}catch(S){if(!(S instanceof la.Err))throw S}p||"der"===d||(p=g.fromCompact(s))}m=l.fromHex(r)}catch(M){return!1}if(!p)return!1;if(o&&p.hasHighS())return!1;a&&(n=t.hash(n));const{r:y,s:v}=p,w=b(n),_=c(v),x=u(w*_),E=u(y*_),k=l.BASE.multiplyAndAddUnsafe(m,x,E)?.toAffine();return!!k&&u(k.x)===y},ProjectivePoint:l,Signature:g,utils:y}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function va(e){return{hash:e,hmac:(t,...n)=>aa(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Kt(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const t=e[r];n.set(t,i),i+=t.length}return n}(...n)),randomBytes:Qt}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const wa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ba=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_a=BigInt(0),xa=BigInt(1),Ea=BigInt(2),ka=(e,t)=>(e+t/Ea)/t;const Aa=Br(wa,void 0,void 0,{sqrt:function(e){const t=wa,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=e*e*e%t,l=c*c*e%t,d=br(l,n,t)*l%t,h=br(d,n,t)*l%t,f=br(h,Ea,t)*c%t,p=br(f,i,t)*f%t,m=br(p,s,t)*p%t,g=br(m,a,t)*m%t,y=br(g,u,t)*g%t,v=br(y,a,t)*m%t,w=br(v,n,t)*l%t,b=br(w,o,t)*p%t,_=br(b,r,t)*c%t,x=br(_,Ea,t);if(!Aa.eql(Aa.sqr(x),e))throw new Error("Cannot find square root");return x}}),Sa=function(e,t){const n=t=>ya({...e,...va(t)});return{...n(t),create:n}}({a:_a,b:BigInt(7),Fp:Aa,n:ba,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ba,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-xa*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=ka(s*e,t),u=ka(-r*e,t);let c=wr(e-a*n-u*i,t),l=wr(-a*r-u*s,t);const d=c>o,h=l>o;if(d&&(c=t-c),h&&(l=t-l),c>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:c,k2neg:h,k2:l}}}},Rn);function Ma(e){try{return oi.ExtendedPoint.fromHex(e),!0}catch{return!1}}const Ia=(e,t)=>oi.sign(e,t.slice(0,32)),Ba=oi.verify,Oa=e=>Tt.Buffer.isBuffer(e)?e:e instanceof Uint8Array?Tt.Buffer.from(e.buffer,e.byteOffset,e.byteLength):Tt.Buffer.from(e);class Ra{constructor(e){Object.assign(this,e)}encode(){return Tt.Buffer.from(Wi(Ta,this))}static decode(e){return Gi(Ta,this,e)}static decodeUnchecked(e){return Pi(Ta,this,e)}}const Ta=new Map;var La;const Pa=32;let Ua=1;class Ca extends Ra{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=mi.decode(e);if(t.length!=Pa)throw new Error("Invalid public key input");this._bn=new li(t)}else this._bn=new li(e);if(this._bn.byteLength()>Pa)throw new Error("Invalid public key input")}}static unique(){const e=new Ca(Ua);return Ua+=1,new Ca(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return mi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Tt.Buffer);if(e.length===Pa)return e;const t=Tt.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const r=Tt.Buffer.concat([e.toBuffer(),Tt.Buffer.from(t),n.toBuffer()]),i=gi(r);return new Ca(i)}static createProgramAddressSync(e,t){let n=Tt.Buffer.alloc(0);e.forEach(function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");n=Tt.Buffer.concat([n,Oa(e)])}),n=Tt.Buffer.concat([n,t.toBuffer(),Tt.Buffer.from("ProgramDerivedAddress")]);const r=gi(n);if(Ma(r))throw new Error("Invalid seeds, address must fall off the curve");return new Ca(r)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n,r=255;for(;0!=r;){try{const i=e.concat(Tt.Buffer.from([r]));n=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return Ma(new Ca(e).toBytes())}}La=Ca,Ca.default=new La("11111111111111111111111111111111"),Ta.set(Ca,{kind:"struct",fields:[["_bn","u256"]]}),new Ca("BPFLoader1111111111111111111111111111111111");const Na=1232;class ja{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach((e,n)=>{t.set(e.toBase58(),n)});const n=e=>{const n=t.get(e.toBase58());if(void 0===n)throw new Error("Encountered an unknown instruction account key during compilation");return n};return e.map(e=>({programIdIndex:n(e.programId),accountKeyIndexes:e.keys.map(e=>n(e.pubkey)),data:e.data}))}}const za=(e="publicKey")=>Zs(32,e),$a=(e="signature")=>Zs(64,e),Fa=(e="string")=>{const t=Fs([js("length"),js("lengthPadding"),Zs(Us(js(),-8),"chars")],e),n=t.decode.bind(t),r=t.encode.bind(t),i=t;return i.decode=(e,t)=>n(e,t).chars.toString(),i.encode=(e,t,n)=>{const i={chars:Tt.Buffer.from(e,"utf8")};return r(i,t,n)},i.alloc=e=>js().span+js().span+Tt.Buffer.from(e,"utf8").length,i};function Da(e){let t=0,n=0;for(;;){let r=e.shift();if(t|=(127&r)<<7*n,n+=1,!(128&r))break}return t}function Za(e,t){let n=t;for(;;){let t=127&n;if(n>>=7,0==n){e.push(t);break}t|=128,e.push(t)}}function qa(e,t){if(!e)throw new Error(t||"Assertion failed")}class Ka{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,r=e=>{const t=e.toBase58();let r=n.get(t);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(t,r)),r},i=r(t);i.isSigner=!0,i.isWritable=!0;for(const s of e){r(s.programId).isInvoked=!0;for(const e of s.keys){const t=r(e.pubkey);t.isSigner||(t.isSigner=e.isSigner),t.isWritable||(t.isWritable=e.isWritable)}}return new Ka(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];qa(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,e])=>e.isSigner&&e.isWritable),n=e.filter(([,e])=>e.isSigner&&!e.isWritable),r=e.filter(([,e])=>!e.isSigner&&e.isWritable),i=e.filter(([,e])=>!e.isSigner&&!e.isWritable),s={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{qa(t.length>0,"Expected at least one writable signer key");const[e]=t[0];qa(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[s,[...t.map(([e])=>new Ca(e)),...n.map(([e])=>new Ca(e)),...r.map(([e])=>new Ca(e)),...i.map(([e])=>new Ca(e))]]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&e.isWritable),[r,i]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&!e.isWritable);if(0!==t.length||0!==r.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:r},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){const n=new Array,r=new Array;for(const[i,s]of this.keyMetaMap.entries())if(t(s)){const t=new Ca(i),s=e.findIndex(e=>e.equals(t));s>=0&&(qa(s<256,"Max lookup table index exceeded"),n.push(s),r.push(t),this.keyMetaMap.delete(i))}return[n,r]}}const Va="Reached end of buffer unexpectedly";function Wa(e){if(0===e.length)throw new Error(Va);return e.shift()}function Ha(e,...t){const[n]=t;if(2===t.length?n+(t[1]??0)>e.length:n>=e.length)throw new Error(Va);return e.splice(...t)}class Ja{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new Ca(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:mi.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ja(this.staticAccountKeys)}static compile(e){const t=Ka.compile(e.instructions,e.payerKey),[n,r]=t.getMessageComponents(),i=new ja(r).compileInstructions(e.instructions).map(e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:mi.encode(e.data)}));return new Ja({header:n,accountKeys:r,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){return e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Za(t,e);const n=this.instructions.map(e=>{const{accounts:t,programIdIndex:n}=e,r=Array.from(mi.decode(e.data));let i=[];Za(i,t.length);let s=[];return Za(s,r.length),{programIdIndex:n,keyIndicesCount:Tt.Buffer.from(i),keyIndices:t,dataLength:Tt.Buffer.from(s),data:r}});let r=[];Za(r,n.length);let i=Tt.Buffer.alloc(Na);Tt.Buffer.from(r).copy(i);let s=r.length;n.forEach(e=>{const t=Fs([Cs("programIdIndex"),Zs(e.keyIndicesCount.length,"keyIndicesCount"),Ds(Cs("keyIndex"),e.keyIndices.length,"keyIndices"),Zs(e.dataLength.length,"dataLength"),Ds(Cs("userdatum"),e.data.length,"data")]).encode(e,i,s);s+=t}),i=i.slice(0,s);const o=Fs([Zs(1,"numRequiredSignatures"),Zs(1,"numReadonlySignedAccounts"),Zs(1,"numReadonlyUnsignedAccounts"),Zs(t.length,"keyCount"),Ds(za("key"),e,"keys"),za("recentBlockhash")]),a={numRequiredSignatures:Tt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Tt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Tt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Tt.Buffer.from(t),keys:this.accountKeys.map(e=>Oa(e.toBytes())),recentBlockhash:mi.decode(this.recentBlockhash)};let u=Tt.Buffer.alloc(2048);const c=o.encode(a,u);return i.copy(u,c),u.slice(0,c+i.length)}static from(e){let t=[...e];const n=Wa(t);if(n!==(127&n))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const r=Wa(t),i=Wa(t),s=Da(t);let o=[];for(let d=0;d<s;d++){const e=Ha(t,0,Pa);o.push(new Ca(Tt.Buffer.from(e)))}const a=Ha(t,0,Pa),u=Da(t);let c=[];for(let d=0;d<u;d++){const e=Wa(t),n=Ha(t,0,Da(t)),r=Ha(t,0,Da(t)),i=mi.encode(Tt.Buffer.from(r));c.push({programIdIndex:e,accounts:n,data:i})}const l={header:{numRequiredSignatures:n,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:i},recentBlockhash:mi.encode(Tt.Buffer.from(a)),accountKeys:o,instructions:c};return new Ja(l)}}class Ga{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ja(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){return e-n<this.addressTableLookups.reduce((e,t)=>e+t.writableIndexes.length,0)}if(e>=this.header.numRequiredSignatures){return e-t<n-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const r=e.find(e=>e.key.equals(n.accountKey));if(!r)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const e of n.writableIndexes){if(!(e<r.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${n.accountKey.toBase58()}`);t.writable.push(r.state.addresses[e])}for(const e of n.readonlyIndexes){if(!(e<r.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${n.accountKey.toBase58()}`);t.readonly.push(r.state.addresses[e])}}return t}static compile(e){const t=Ka.compile(e.instructions,e.payerKey),n=new Array,r={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const u of i){const e=t.extractTableLookup(u);if(void 0!==e){const[t,{writable:i,readonly:s}]=e;n.push(t),r.writable.push(...i),r.readonly.push(...s)}}const[s,o]=t.getMessageComponents(),a=new ja(o,r).compileInstructions(e.instructions);return new Ga({header:s,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:n})}serialize(){const e=Array();Za(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Za(n,this.compiledInstructions.length);const r=this.serializeAddressTableLookups(),i=Array();Za(i,this.addressTableLookups.length);const s=Fs([Cs("prefix"),Fs([Cs("numRequiredSignatures"),Cs("numReadonlySignedAccounts"),Cs("numReadonlyUnsignedAccounts")],"header"),Zs(e.length,"staticAccountKeysLength"),Ds(za(),this.staticAccountKeys.length,"staticAccountKeys"),za("recentBlockhash"),Zs(n.length,"instructionsLength"),Zs(t.length,"serializedInstructions"),Zs(i.length,"addressTableLookupsLength"),Zs(r.length,"serializedAddressTableLookups")]),o=new Uint8Array(Na),a=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(e=>e.toBytes()),recentBlockhash:mi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:r},o);return o.slice(0,a)}serializeInstructions(){let e=0;const t=new Uint8Array(Na);for(const n of this.compiledInstructions){const r=Array();Za(r,n.accountKeyIndexes.length);const i=Array();Za(i,n.data.length);e+=Fs([Cs("programIdIndex"),Zs(r.length,"encodedAccountKeyIndexesLength"),Ds(Cs(),n.accountKeyIndexes.length,"accountKeyIndexes"),Zs(i.length,"encodedDataLength"),Zs(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(r),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Na);for(const n of this.addressTableLookups){const r=Array();Za(r,n.writableIndexes.length);const i=Array();Za(i,n.readonlyIndexes.length);e+=Fs([za("accountKey"),Zs(r.length,"encodedWritableIndexesLength"),Ds(Cs(),n.writableIndexes.length,"writableIndexes"),Zs(i.length,"encodedReadonlyIndexesLength"),Ds(Cs(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(r),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=Wa(t),r=127&n;qa(n!==r,"Expected versioned message but received legacy message");qa(0===r,`Expected versioned message with version 0 but found version ${r}`);const i={numRequiredSignatures:Wa(t),numReadonlySignedAccounts:Wa(t),numReadonlyUnsignedAccounts:Wa(t)},s=[],o=Da(t);for(let h=0;h<o;h++)s.push(new Ca(Ha(t,0,Pa)));const a=mi.encode(Ha(t,0,Pa)),u=Da(t),c=[];for(let h=0;h<u;h++){const e=Wa(t),n=Ha(t,0,Da(t)),r=Da(t),i=new Uint8Array(Ha(t,0,r));c.push({programIdIndex:e,accountKeyIndexes:n,data:i})}const l=Da(t),d=[];for(let h=0;h<l;h++){const e=new Ca(Ha(t,0,Pa)),n=Ha(t,0,Da(t)),r=Ha(t,0,Da(t));d.push({accountKey:e,writableIndexes:n,readonlyIndexes:r})}return new Ga({header:i,staticAccountKeys:s,recentBlockhash:a,compiledInstructions:c,addressTableLookups:d})}}const Ya={deserializeMessageVersion(e){const t=e[0],n=127&t;return n===t?"legacy":n},deserialize:e=>{const t=Ya.deserializeMessageVersion(e);if("legacy"===t)return Ja.from(e);if(0===t)return Ga.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},Xa=Tt.Buffer.alloc(64).fill(0);class Qa{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Tt.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class eu{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Qa(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)n=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");n=this.signatures[0].publicKey}for(let p=0;p<t.length;p++)if(void 0===t[p].programId)throw new Error(`Transaction instruction index ${p} has undefined program id`);const r=[],i=[];t.forEach(e=>{e.keys.forEach(e=>{i.push({...e})});const t=e.programId.toString();r.includes(t)||r.push(t)}),r.forEach(e=>{i.push({pubkey:new Ca(e),isSigner:!1,isWritable:!1})});const s=[];i.forEach(e=>{const t=e.pubkey.toString(),n=s.findIndex(e=>e.pubkey.toString()===t);n>-1?(s[n].isWritable=s[n].isWritable||e.isWritable,s[n].isSigner=s[n].isSigner||e.isSigner):s.push(e)}),s.sort(function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});const o=s.findIndex(e=>e.pubkey.equals(n));if(o>-1){const[e]=s.splice(o,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const p of this.signatures){const e=s.findIndex(e=>e.pubkey.equals(p.publicKey));if(!(e>-1))throw new Error(`unknown signer: ${p.publicKey.toString()}`);s[e].isSigner||(s[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,c=0;const l=[],d=[];s.forEach(({pubkey:e,isSigner:t,isWritable:n})=>{t?(l.push(e.toString()),a+=1,n||(u+=1)):(d.push(e.toString()),n||(c+=1))});const h=l.concat(d),f=t.map(e=>{const{data:t,programId:n}=e;return{programIdIndex:h.indexOf(n.toString()),accounts:e.keys.map(e=>h.indexOf(e.pubkey.toString())),data:mi.encode(t)}});return f.forEach(e=>{qa(e.programIdIndex>=0),e.accounts.forEach(e=>qa(e>=0))}),new Ja({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:c},accountKeys:h,recentBlockhash:e,instructions:f})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){if(this.signatures.every((e,n)=>t[n].equals(e.publicKey)))return e}return this.signatures=t.map(e=>({signature:null,publicKey:e})),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter(e=>{const n=e.toString();return!t.has(n)&&(t.add(n),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const e=i.publicKey.toString();t.has(e)||(t.add(e),n.push(i))}this.signatures=n.map(e=>({signature:null,publicKey:e.publicKey}));const r=this._compile();this._partialSign(r,...n)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const e=i.publicKey.toString();t.has(e)||(t.add(e),n.push(i))}const r=this._compile();this._partialSign(r,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(e=>{const t=Ia(n,e.secretKey);this._addSignature(e.publicKey,Oa(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){qa(64===t.length);const n=this.signatures.findIndex(t=>e.equals(t.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=Tt.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:r,publicKey:i}of this.signatures)null===r?t&&(n.missing||(n.missing=[])).push(i):Ba(r,e,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=this.serializeMessage();if(n){const e=this._getMessageSignednessErrors(r,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map(e=>e.toBase58()).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map(e=>e.toBase58()).join("`, `")}\`].`),new Error(t)}}return this._serialize(r)}_serialize(e){const{signatures:t}=this,n=[];Za(n,t.length);const r=n.length+64*t.length+e.length,i=Tt.Buffer.alloc(r);return qa(t.length<256),Tt.Buffer.from(n).copy(i,0),t.forEach(({signature:e},t)=>{null!==e&&(qa(64===e.length,"signature has invalid length"),Tt.Buffer.from(e).copy(i,n.length+64*t))}),e.copy(i,n.length+64*t.length),qa(i.length<=Na,`Transaction too large: ${i.length} > 1232`),i}get keys(){return qa(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return qa(1===this.instructions.length),this.instructions[0].programId}get data(){return qa(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const n=Da(t);let r=[];for(let i=0;i<n;i++){const e=Ha(t,0,64);r.push(mi.encode(Tt.Buffer.from(e)))}return eu.populate(Ja.from(t),r)}static populate(e,t=[]){const n=new eu;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((t,r)=>{const i={signature:t==mi.encode(Xa)?null:mi.decode(t),publicKey:e.accountKeys[r]};n.signatures.push(i)}),e.instructions.forEach(t=>{const r=t.accounts.map(t=>{const r=e.accountKeys[t];return{pubkey:r,isSigner:n.signatures.some(e=>e.publicKey.toString()===r.toString())||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}});n.instructions.push(new Qa({keys:r,programId:e.accountKeys[t.programIdIndex],data:mi.decode(t.data)}))}),n._message=e,n._json=n.toJSON(),n}}class tu{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)qa(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let n=0;n<e.header.numRequiredSignatures;n++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Za(t,this.signatures.length);const n=Fs([Zs(t.length,"encodedSignaturesLength"),Ds($a(),this.signatures.length,"signatures"),Zs(e.length,"serializedMessage")]),r=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},r);return r.slice(0,i)}static deserialize(e){let t=[...e];const n=[],r=Da(t);for(let s=0;s<r;s++)n.push(new Uint8Array(Ha(t,0,64)));const i=Ya.deserialize(new Uint8Array(t));return new tu(i,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const r of e){const e=n.findIndex(e=>e.equals(r.publicKey));qa(e>=0,`Cannot sign with non signer key ${r.publicKey.toBase58()}`),this.signatures[e]=Ia(t,r.secretKey)}}addSignature(e,t){qa(64===t.byteLength,"Signature must be 64 bytes long");const n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(t=>t.equals(e));qa(n>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=t}}new Ca("SysvarC1ock11111111111111111111111111111111"),new Ca("SysvarEpochSchedu1e111111111111111111111111"),new Ca("Sysvar1nstructions1111111111111111111111111"),new Ca("SysvarRecentB1ockHashes11111111111111111111"),new Ca("SysvarRent111111111111111111111111111111111"),new Ca("SysvarRewards111111111111111111111111111111"),new Ca("SysvarS1otHashes111111111111111111111111111"),new Ca("SysvarS1otHistory11111111111111111111111111"),new Ca("SysvarStakeHistory1111111111111111111111111");const nu=zs("lamportsPerSignature");function ru(e){const t=Zs(8,e),n=t.decode.bind(t),r=t.encode.bind(t),i=t,s=Xs();return i.decode=(e,t)=>{const r=n(e,t);return s.decode(r)},i.encode=(e,t,n)=>{const i=s.encode(e);return r(i,t,n)},i}Fs([js("version"),js("state"),za("authorizedPubkey"),za("nonce"),Fs([nu],"feeCalculator")]).span,Object.freeze({Create:{index:0,layout:Fs([js("instruction"),$s("lamports"),$s("space"),za("programId")])},Assign:{index:1,layout:Fs([js("instruction"),za("programId")])},Transfer:{index:2,layout:Fs([js("instruction"),ru("lamports")])},CreateWithSeed:{index:3,layout:Fs([js("instruction"),za("base"),Fa("seed"),$s("lamports"),$s("space"),za("programId")])},AdvanceNonceAccount:{index:4,layout:Fs([js("instruction")])},WithdrawNonceAccount:{index:5,layout:Fs([js("instruction"),$s("lamports")])},InitializeNonceAccount:{index:6,layout:Fs([js("instruction"),za("authorized")])},AuthorizeNonceAccount:{index:7,layout:Fs([js("instruction"),za("authorized")])},Allocate:{index:8,layout:Fs([js("instruction"),$s("space")])},AllocateWithSeed:{index:9,layout:Fs([js("instruction"),za("base"),Fa("seed"),$s("space"),za("programId")])},AssignWithSeed:{index:10,layout:Fs([js("instruction"),za("base"),Fa("seed"),za("programId")])},TransferWithSeed:{index:11,layout:Fs([js("instruction"),ru("lamports"),Fa("seed"),za("programId")])},UpgradeNonceAccount:{index:12,layout:Fs([js("instruction")])}}),new Ca("11111111111111111111111111111111"),new Ca("BPFLoader2111111111111111111111111111111111"),Fs([js("typeIndex"),ru("deactivationSlot"),zs("lastExtendedSlot"),Cs("lastExtendedStartIndex"),Cs(),Ds(za(),Us(Cs(),-1),"authority")]);const iu=Ao(po(Ca),bo(),e=>new Ca(e)),su=_o([bo(),mo("base64")]),ou=Ao(po(Tt.Buffer),su,e=>Tt.Buffer.from(e[0],"base64"));function au(e){return Eo([xo({jsonrpc:mo("2.0"),id:bo(),result:e}),xo({jsonrpc:mo("2.0"),id:bo(),error:xo({code:ko(),message:bo(),data:vo(lo("any",()=>!0))})})])}const uu=au(ko());function cu(e){return Ao(au(e),uu,t=>"error"in t?t:{...t,result:ao(t.result,e)})}function lu(e){return cu(xo({context:xo({slot:yo()}),value:e}))}function du(e){return xo({context:xo({slot:yo()}),value:e})}const hu=xo({foundation:yo(),foundationTerm:yo(),initial:yo(),taper:yo(),terminal:yo()});cu(ho(go(xo({epoch:yo(),effectiveSlot:yo(),amount:yo(),postBalance:yo(),commission:vo(go(yo()))}))));const fu=ho(xo({slot:yo(),prioritizationFee:yo()})),pu=xo({total:yo(),validator:yo(),foundation:yo(),epoch:yo()}),mu=xo({epoch:yo(),slotIndex:yo(),slotsInEpoch:yo(),absoluteSlot:yo(),blockHeight:vo(yo()),transactionCount:vo(yo())}),gu=xo({slotsPerEpoch:yo(),leaderScheduleSlotOffset:yo(),warmup:fo(),firstNormalEpoch:yo(),firstNormalSlot:yo()}),yu=wo(bo(),ho(yo())),vu=go(Eo([xo({}),bo()])),wu=xo({err:vu}),bu=mo("receivedSignature");xo({"solana-core":bo(),"feature-set":vo(yo())});const _u=xo({program:bo(),programId:iu,parsed:ko()}),xu=xo({programId:iu,accounts:ho(iu),data:bo()});lu(xo({err:go(Eo([xo({}),bo()])),logs:go(ho(bo())),accounts:vo(go(ho(go(xo({executable:fo(),owner:bo(),lamports:yo(),data:ho(bo()),rentEpoch:vo(yo())}))))),unitsConsumed:vo(yo()),returnData:vo(go(xo({programId:bo(),data:_o([bo(),mo("base64")])}))),innerInstructions:vo(go(ho(xo({index:yo(),instructions:ho(Eo([_u,xu]))}))))})),lu(xo({byIdentity:wo(bo(),ho(yo())),range:xo({firstSlot:yo(),lastSlot:yo()})})),cu(hu),cu(pu),cu(fu),cu(mu),cu(gu),cu(yu),cu(yo()),lu(xo({total:yo(),circulating:yo(),nonCirculating:yo(),nonCirculatingAccounts:ho(iu)}));const Eu=xo({amount:bo(),uiAmount:go(yo()),decimals:yo(),uiAmountString:vo(bo())});lu(ho(xo({address:iu,amount:bo(),uiAmount:go(yo()),decimals:yo(),uiAmountString:vo(bo())}))),lu(ho(xo({pubkey:iu,account:xo({executable:fo(),owner:iu,lamports:yo(),data:ou,rentEpoch:yo()})})));const ku=xo({program:bo(),parsed:ko(),space:yo()});lu(ho(xo({pubkey:iu,account:xo({executable:fo(),owner:iu,lamports:yo(),data:ku,rentEpoch:yo()})}))),lu(ho(xo({lamports:yo(),address:iu})));const Au=xo({executable:fo(),owner:iu,lamports:yo(),data:ou,rentEpoch:yo()});xo({pubkey:iu,account:Au});const Su=Ao(Eo([po(Tt.Buffer),ku]),Eo([su,ku]),e=>Array.isArray(e)?ao(e,ou):e),Mu=xo({executable:fo(),owner:iu,lamports:yo(),data:Su,rentEpoch:yo()});xo({pubkey:iu,account:Mu}),xo({state:Eo([mo("active"),mo("inactive"),mo("activating"),mo("deactivating")]),active:yo(),inactive:yo()}),cu(ho(xo({signature:bo(),slot:yo(),err:vu,memo:go(bo()),blockTime:vo(go(yo()))}))),cu(ho(xo({signature:bo(),slot:yo(),err:vu,memo:go(bo()),blockTime:vo(go(yo()))}))),xo({subscription:yo(),result:du(Au)});const Iu=xo({pubkey:iu,account:Au});xo({subscription:yo(),result:du(Iu)});const Bu=xo({parent:yo(),slot:yo(),root:yo()});xo({subscription:yo(),result:Bu});const Ou=Eo([xo({type:Eo([mo("firstShredReceived"),mo("completed"),mo("optimisticConfirmation"),mo("root")]),slot:yo(),timestamp:yo()}),xo({type:mo("createdBank"),parent:yo(),slot:yo(),timestamp:yo()}),xo({type:mo("frozen"),slot:yo(),timestamp:yo(),stats:xo({numTransactionEntries:yo(),numSuccessfulTransactions:yo(),numFailedTransactions:yo(),maxTransactionsPerEntry:yo()})}),xo({type:mo("dead"),slot:yo(),timestamp:yo(),err:bo()})]);xo({subscription:yo(),result:Ou}),xo({subscription:yo(),result:du(Eo([wu,bu]))}),xo({subscription:yo(),result:yo()}),xo({pubkey:bo(),gossip:go(bo()),tpu:go(bo()),rpc:go(bo()),version:go(bo())});const Ru=xo({votePubkey:bo(),nodePubkey:bo(),activatedStake:yo(),epochVoteAccount:fo(),epochCredits:ho(_o([yo(),yo(),yo()])),commission:yo(),lastVote:yo(),rootSlot:go(yo())});cu(xo({current:ho(Ru),delinquent:ho(Ru)}));const Tu=Eo([mo("processed"),mo("confirmed"),mo("finalized")]),Lu=xo({slot:yo(),confirmations:go(yo()),err:vu,confirmationStatus:vo(Tu)});lu(ho(go(Lu))),cu(yo());const Pu=xo({accountKey:iu,writableIndexes:ho(yo()),readonlyIndexes:ho(yo())}),Uu=xo({signatures:ho(bo()),message:xo({accountKeys:ho(bo()),header:xo({numRequiredSignatures:yo(),numReadonlySignedAccounts:yo(),numReadonlyUnsignedAccounts:yo()}),instructions:ho(xo({accounts:ho(yo()),data:bo(),programIdIndex:yo()})),recentBlockhash:bo(),addressTableLookups:vo(ho(Pu))})}),Cu=xo({pubkey:iu,signer:fo(),writable:fo(),source:vo(Eo([mo("transaction"),mo("lookupTable")]))}),Nu=xo({accountKeys:ho(Cu),signatures:ho(bo())}),ju=xo({parsed:ko(),program:bo(),programId:iu}),zu=xo({accounts:ho(iu),data:bo(),programId:iu}),$u=Ao(Eo([zu,ju]),Eo([xo({parsed:ko(),program:bo(),programId:bo()}),xo({accounts:ho(bo()),data:bo(),programId:bo()})]),e=>ao(e,"accounts"in e?zu:ju)),Fu=xo({signatures:ho(bo()),message:xo({accountKeys:ho(Cu),instructions:ho($u),recentBlockhash:bo(),addressTableLookups:vo(go(ho(Pu)))})}),Du=xo({accountIndex:yo(),mint:bo(),owner:vo(bo()),programId:vo(bo()),uiTokenAmount:Eu}),Zu=xo({writable:ho(iu),readonly:ho(iu)}),qu=xo({err:vu,fee:yo(),innerInstructions:vo(go(ho(xo({index:yo(),instructions:ho(xo({accounts:ho(yo()),data:bo(),programIdIndex:yo()}))})))),preBalances:ho(yo()),postBalances:ho(yo()),logMessages:vo(go(ho(bo()))),preTokenBalances:vo(go(ho(Du))),postTokenBalances:vo(go(ho(Du))),loadedAddresses:vo(Zu),computeUnitsConsumed:vo(yo()),costUnits:vo(yo())}),Ku=xo({err:vu,fee:yo(),innerInstructions:vo(go(ho(xo({index:yo(),instructions:ho($u)})))),preBalances:ho(yo()),postBalances:ho(yo()),logMessages:vo(go(ho(bo()))),preTokenBalances:vo(go(ho(Du))),postTokenBalances:vo(go(ho(Du))),loadedAddresses:vo(Zu),computeUnitsConsumed:vo(yo()),costUnits:vo(yo())}),Vu=Eo([mo(0),mo("legacy")]),Wu=xo({pubkey:bo(),lamports:yo(),postBalance:go(yo()),rewardType:go(bo()),commission:vo(go(yo()))});cu(go(xo({blockhash:bo(),previousBlockhash:bo(),parentSlot:yo(),transactions:ho(xo({transaction:Uu,meta:go(qu),version:vo(Vu)})),rewards:vo(ho(Wu)),blockTime:go(yo()),blockHeight:go(yo())}))),cu(go(xo({blockhash:bo(),previousBlockhash:bo(),parentSlot:yo(),rewards:vo(ho(Wu)),blockTime:go(yo()),blockHeight:go(yo())}))),cu(go(xo({blockhash:bo(),previousBlockhash:bo(),parentSlot:yo(),transactions:ho(xo({transaction:Nu,meta:go(qu),version:vo(Vu)})),rewards:vo(ho(Wu)),blockTime:go(yo()),blockHeight:go(yo())}))),cu(go(xo({blockhash:bo(),previousBlockhash:bo(),parentSlot:yo(),transactions:ho(xo({transaction:Fu,meta:go(Ku),version:vo(Vu)})),rewards:vo(ho(Wu)),blockTime:go(yo()),blockHeight:go(yo())}))),cu(go(xo({blockhash:bo(),previousBlockhash:bo(),parentSlot:yo(),transactions:ho(xo({transaction:Nu,meta:go(Ku),version:vo(Vu)})),rewards:vo(ho(Wu)),blockTime:go(yo()),blockHeight:go(yo())}))),cu(go(xo({blockhash:bo(),previousBlockhash:bo(),parentSlot:yo(),rewards:vo(ho(Wu)),blockTime:go(yo()),blockHeight:go(yo())}))),cu(go(xo({blockhash:bo(),previousBlockhash:bo(),parentSlot:yo(),transactions:ho(xo({transaction:Uu,meta:go(qu)})),rewards:vo(ho(Wu)),blockTime:go(yo())}))),cu(go(xo({blockhash:bo(),previousBlockhash:bo(),parentSlot:yo(),signatures:ho(bo()),blockTime:go(yo())}))),cu(go(xo({slot:yo(),meta:go(qu),blockTime:vo(go(yo())),transaction:Uu,version:vo(Vu)}))),cu(go(xo({slot:yo(),transaction:Fu,meta:go(Ku),blockTime:vo(go(yo())),version:vo(Vu)}))),lu(xo({blockhash:bo(),lastValidBlockHeight:yo()})),lu(fo());cu(ho(xo({slot:yo(),numTransactions:yo(),numSlots:yo(),samplePeriodSecs:yo()}))),lu(go(xo({feeCalculator:xo({lamportsPerSignature:yo()})}))),cu(bo()),cu(bo());const Hu=xo({err:vu,logs:ho(bo()),signature:bo()});var Ju;xo({result:du(Hu),subscription:yo()}),Object.freeze({CreateLookupTable:{index:0,layout:Fs([js("instruction"),ru("recentSlot"),Cs("bumpSeed")])},FreezeLookupTable:{index:1,layout:Fs([js("instruction")])},ExtendLookupTable:{index:2,layout:Fs([js("instruction"),ru(),Ds(za(),Us(js(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Fs([js("instruction")])},CloseLookupTable:{index:4,layout:Fs([js("instruction")])}}),new Ca("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:Fs([Cs("instruction"),js("units"),js("additionalFee")])},RequestHeapFrame:{index:1,layout:Fs([Cs("instruction"),js("bytes")])},SetComputeUnitLimit:{index:2,layout:Fs([Cs("instruction"),js("units")])},SetComputeUnitPrice:{index:3,layout:Fs([Cs("instruction"),ru("microLamports")])}}),new Ca("ComputeBudget111111111111111111111111111111"),Fs([Cs("numSignatures"),Cs("padding"),Ns("signatureOffset"),Ns("signatureInstructionIndex"),Ns("publicKeyOffset"),Ns("publicKeyInstructionIndex"),Ns("messageDataOffset"),Ns("messageDataSize"),Ns("messageInstructionIndex")]),new Ca("Ed25519SigVerify111111111111111111111111111"),Sa.utils.isValidPrivateKey,Fs([Cs("numSignatures"),Ns("signatureOffset"),Cs("signatureInstructionIndex"),Ns("ethAddressOffset"),Cs("ethAddressInstructionIndex"),Ns("messageDataOffset"),Ns("messageDataSize"),Cs("messageInstructionIndex"),Zs(20,"ethAddress"),Zs(64,"signature"),Cs("recoveryId")]),new Ca("KeccakSecp256k11111111111111111111111111111"),new Ca("StakeConfig11111111111111111111111111111111");class Gu{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}Ju=Gu,Gu.default=new Ju(0,0,Ca.default),Object.freeze({Initialize:{index:0,layout:Fs([js("instruction"),((e="authorized")=>Fs([za("staker"),za("withdrawer")],e))(),((e="lockup")=>Fs([$s("unixTimestamp"),$s("epoch"),za("custodian")],e))()])},Authorize:{index:1,layout:Fs([js("instruction"),za("newAuthorized"),js("stakeAuthorizationType")])},Delegate:{index:2,layout:Fs([js("instruction")])},Split:{index:3,layout:Fs([js("instruction"),$s("lamports")])},Withdraw:{index:4,layout:Fs([js("instruction"),$s("lamports")])},Deactivate:{index:5,layout:Fs([js("instruction")])},Merge:{index:7,layout:Fs([js("instruction")])},AuthorizeWithSeed:{index:8,layout:Fs([js("instruction"),za("newAuthorized"),js("stakeAuthorizationType"),Fa("authoritySeed"),za("authorityOwner")])}}),new Ca("Stake11111111111111111111111111111111111111"),Object.freeze({InitializeAccount:{index:0,layout:Fs([js("instruction"),((e="voteInit")=>Fs([za("nodePubkey"),za("authorizedVoter"),za("authorizedWithdrawer"),Cs("commission")],e))()])},Authorize:{index:1,layout:Fs([js("instruction"),za("newAuthorized"),js("voteAuthorizationType")])},Withdraw:{index:3,layout:Fs([js("instruction"),$s("lamports")])},UpdateValidatorIdentity:{index:4,layout:Fs([js("instruction")])},AuthorizeWithSeed:{index:10,layout:Fs([js("instruction"),((e="voteAuthorizeWithSeedArgs")=>Fs([js("voteAuthorizationType"),za("currentAuthorityDerivedKeyOwnerPubkey"),Fa("currentAuthorityDerivedKeySeed"),za("newAuthorized")],e))()])}}),new Ca("Vote111111111111111111111111111111111111111"),new Ca("Va1idator1nfo111111111111111111111111111111"),xo({name:bo(),website:vo(bo()),details:vo(bo()),iconUrl:vo(bo()),keybaseUsername:vo(bo())}),new Ca("Vote111111111111111111111111111111111111111"),Fs([za("nodePubkey"),za("authorizedWithdrawer"),Cs("commission"),zs(),Ds(Fs([zs("slot"),js("confirmationCount")]),Us(js(),-8),"votes"),Cs("rootSlotValid"),zs("rootSlot"),zs(),Ds(Fs([zs("epoch"),za("authorizedVoter")]),Us(js(),-8),"authorizedVoters"),Fs([Ds(Fs([za("authorizedPubkey"),zs("epochOfLastAuthorizedSwitch"),zs("targetEpoch")]),32,"buf"),zs("idx"),Cs("isEmpty")],"priorVoters"),zs(),Ds(Fs([zs("epoch"),zs("credits"),zs("prevCredits")]),Us(js(),-8),"epochCredits"),Fs([zs("slot"),zs("timestamp")],"lastTimestamp")]);function Yu(e){return Buffer.from(e.serialize({verifySignatures:!1})).toString("base64")}function Xu(e){const t=Buffer.from(e,"base64");return"legacy"===Ya.deserializeMessageVersion(t)?tu.deserialize(t):eu.from(t)}let Qu=class e extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof e){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof e&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${i??""}`;super([t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${s}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=i,this.shortMessage=t}walk(e){return ec(this,e)}};function ec(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&e.cause?ec(e.cause,t):t?null:e}function tc(e,t={}){const{raw:n=!1}=t,r=e;if(n)return e;if(r.error){const{code:e}=r.error;throw new(e===fc.code?fc:e===rc.code?rc:e===hc.code?hc:e===lc.code?lc:e===uc.code?uc:e===dc.code?dc:e===ac.code?ac:e===pc.code?pc:e===ic.code?ic:e===sc.code?sc:e===oc.code?oc:e===cc.code?cc:nc)(r.error)}return r.result}let nc=class extends Error{constructor(e){const{code:t,message:n,data:r}=e;super(n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.data=r}};class rc extends nc{constructor(e={}){super({message:"Missing or invalid parameters.",...e,code:rc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}}Object.defineProperty(rc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class ic extends nc{constructor(e={}){super({message:"Requested resource not found.",...e,code:ic.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}}Object.defineProperty(ic,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class sc extends nc{constructor(e={}){super({message:"Requested resource not available.",...e,code:sc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}}Object.defineProperty(sc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class oc extends nc{constructor(e={}){super({message:"Transaction creation failed.",...e,code:oc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}}Object.defineProperty(oc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class ac extends nc{constructor(e={}){super({message:"Method is not implemented.",...e,code:ac.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}}Object.defineProperty(ac,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class uc extends nc{constructor(e={}){super({message:"Rate limit exceeded.",...e,code:uc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}}Object.defineProperty(uc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class cc extends nc{constructor(e={}){super({message:"JSON-RPC version not supported.",...e,code:cc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}}Object.defineProperty(cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class lc extends nc{constructor(e={}){super({message:"Input is not a valid JSON-RPC request.",...e,code:lc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}}Object.defineProperty(lc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class dc extends nc{constructor(e={}){super({message:"Method does not exist.",...e,code:dc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}}Object.defineProperty(dc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class hc extends nc{constructor(e={}){super({message:"Invalid method parameters.",...e,code:hc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}}Object.defineProperty(hc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class fc extends nc{constructor(e={}){super({message:"Internal JSON-RPC error.",...e,code:fc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalErrorError"})}}Object.defineProperty(fc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class pc extends nc{constructor(e={}){super({message:"Failed to parse JSON-RPC response.",...e,code:pc.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}}Object.defineProperty(pc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class mc extends Error{constructor(e,t){super(t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=t}}class gc extends mc{constructor({message:e="The user rejected the request."}={}){super(4001,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}}Object.defineProperty(gc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class yc extends mc{constructor({message:e="The requested method and/or account has not been authorized by the user."}={}){super(4100,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}}Object.defineProperty(yc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class vc extends mc{constructor({message:e="The provider does not support the requested method."}={}){super(4200,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}}Object.defineProperty(vc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class wc extends mc{constructor({message:e="The provider is disconnected from all chains."}={}){super(4900,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}}Object.defineProperty(wc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class bc extends mc{constructor({message:e="The provider is not connected to the requested chain."}={}){super(4901,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}}Object.defineProperty(bc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class _c extends Qu{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const xc=Symbol("Comlink.proxy"),Ec=Symbol("Comlink.endpoint"),kc=Symbol("Comlink.releaseProxy"),Ac=Symbol("Comlink.finalizer"),Sc=Symbol("Comlink.thrown"),Mc=e=>"object"==typeof e&&null!==e||"function"==typeof e,Ic=new Map([["proxy",{canHandle:e=>Mc(e)&&e[xc],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Bc(e,t),[n,[n]]},deserialize:e=>(e.start(),Rc(e))}],["throw",{canHandle:e=>Mc(e)&&Sc in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function Bc(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,i.origin))return void console.warn(`Invalid origin '${i.origin}' for comlink proxy`);const{id:s,type:o,path:a}=Object.assign({path:[]},i.data),u=(i.data.argumentList||[]).map($c);let c;try{const t=a.slice(0,-1).reduce((e,t)=>e[t],e),n=a.reduce((e,t)=>e[t],e);switch(o){case"GET":c=n;break;case"SET":t[a.slice(-1)[0]]=$c(i.data.value),c=!0;break;case"APPLY":c=n.apply(t,u);break;case"CONSTRUCT":c=function(e){return Object.assign(e,{[xc]:!0})}(new n(...u));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;Bc(e,n),c=function(e,t){return jc.set(e,t),e}(t,[t])}break;case"RELEASE":c=void 0;break;default:return}}catch(l){c={value:l,[Sc]:0}}Promise.resolve(c).catch(e=>({value:e,[Sc]:0})).then(n=>{const[i,a]=zc(n);t.postMessage(Object.assign(Object.assign({},i),{id:s}),a),"RELEASE"===o&&(t.removeEventListener("message",r),Oc(t),Ac in e&&"function"==typeof e[Ac]&&e[Ac]())}).catch(e=>{const[n,r]=zc({value:new TypeError("Unserializable return value"),[Sc]:0});t.postMessage(Object.assign(Object.assign({},n),{id:s}),r)})}),t.start&&t.start()}function Oc(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function Rc(e,t){const n=new Map;return e.addEventListener("message",function(e){const{data:t}=e;if(!t||!t.id)return;const r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}),Cc(e,n,[],t)}function Tc(e){if(e)throw new Error("Proxy has been released and is not useable")}function Lc(e){return Fc(e,new Map,{type:"RELEASE"}).then(()=>{Oc(e)})}const Pc=new WeakMap,Uc="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(Pc.get(e)||0)-1;Pc.set(e,t),0===t&&Lc(e)});function Cc(e,t,n=[],r=function(){}){let i=!1;const s=new Proxy(r,{get(r,o){if(Tc(i),o===kc)return()=>{!function(e){Uc&&Uc.unregister(e)}(s),Lc(e),t.clear(),i=!0};if("then"===o){if(0===n.length)return{then:()=>s};const r=Fc(e,t,{type:"GET",path:n.map(e=>e.toString())}).then($c);return r.then.bind(r)}return Cc(e,t,[...n,o])},set(r,s,o){Tc(i);const[a,u]=zc(o);return Fc(e,t,{type:"SET",path:[...n,s].map(e=>e.toString()),value:a},u).then($c)},apply(r,s,o){Tc(i);const a=n[n.length-1];if(a===Ec)return Fc(e,t,{type:"ENDPOINT"}).then($c);if("bind"===a)return Cc(e,t,n.slice(0,-1));const[u,c]=Nc(o);return Fc(e,t,{type:"APPLY",path:n.map(e=>e.toString()),argumentList:u},c).then($c)},construct(r,s){Tc(i);const[o,a]=Nc(s);return Fc(e,t,{type:"CONSTRUCT",path:n.map(e=>e.toString()),argumentList:o},a).then($c)}});return function(e,t){const n=(Pc.get(t)||0)+1;Pc.set(t,n),Uc&&Uc.register(e,t,e)}(s,e),s}function Nc(e){const t=e.map(zc);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const jc=new WeakMap;function zc(e){for(const[t,n]of Ic)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},jc.get(e)||[]]}function $c(e){switch(e.type){case"HANDLER":return Ic.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Fc(e,t,n,r){return new Promise(i=>{const s=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(s,i),e.start&&e.start(),e.postMessage(Object.assign({id:s},n),r)})}const Dc={postMessage:e=>{window.ReactNativeWebView.postMessage(JSON.stringify(e))},addEventListener:(e,t,...n)=>{document.addEventListener("FarcasterFrameCallback",t,...n)},removeEventListener:(e,t)=>{document.removeEventListener("FarcasterFrameCallback",t)}},Zc=Rc("undefined"==typeof window?{postMessage(){},addEventListener:()=>{},removeEventListener:()=>{}}:window?.ReactNativeWebView?Dc:function(e,t=globalThis,n="*"){return{postMessage:(t,r)=>e.postMessage(t,n,r),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}(window?.parent??window)),qc=function(){const e=new sa;return{get eventNames(){return e.eventNames.bind(e)},get listenerCount(){return e.listenerCount.bind(e)},get listeners(){return e.listeners.bind(e)},addListener:e.addListener.bind(e),emit:e.emit.bind(e),off:e.off.bind(e),on:e.on.bind(e),once:e.once.bind(e),removeAllListeners:e.removeAllListeners.bind(e),removeListener:e.removeListener.bind(e)}}(),Kc=function(e={}){let t=e.id??0;return{prepare:e=>function(e){return{...e,jsonrpc:"2.0"}}({id:t++,...e}),get id(){return t}}}();const Vc=function(e,t={}){const{includeEvents:n=!0}=t;if(!e)throw new _c;return{...n?{on:e.on?.bind(e),removeListener:e.removeListener?.bind(e)}:{},async request(t){const n=await e.request(t);return n&&"object"==typeof n&&"jsonrpc"in n?tc(n):n}}}({...qc,async request(e){const t=Kc.prepare(e);try{const e=await Zc.ethProviderRequestV2(t).then(e=>tc(e,{request:t,raw:!0}));if(e.error)throw function({code:e,details:t}){switch(e){case 4001:return new gc;case 4100:return new yc;case 4200:return new vc;case 4900:return new wc;case 4901:return new bc;default:return new mc(e,t??"Unknown provider RPC error")}}(e.error);return e.result}catch(n){if(n instanceof Error&&n.message.match(/cannot read property 'apply'/i))return await Zc.ethProviderRequest(t);if(n instanceof mc||n instanceof nc)throw n;throw new fc({message:n instanceof Error?n.message:void 0})}}});function Wc(e){const t=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(e)});window.dispatchEvent(t);const n=()=>window.dispatchEvent(t);return window.addEventListener("eip6963:requestProvider",n),()=>window.removeEventListener("eip6963:requestProvider",n)}"undefined"!=typeof document&&(document.addEventListener("eip6963:requestProvider",()=>{Zc.eip6963RequestProvider()}),document.addEventListener("FarcasterFrameEthProviderEvent",e=>{if(e instanceof MessageEvent){const t=e.data;qc.emit(t.event,...t.params)}}),document.addEventListener("FarcasterFrameEvent",e=>{if(e instanceof MessageEvent){const t=e.data;"eip6963:announceProvider"===t.event&&Wc({info:t.info,provider:Vc})}})),"undefined"!=typeof window&&(window.addEventListener("eip6963:requestProvider",()=>{Zc.eip6963RequestProvider()}),window.addEventListener("message",e=>{if(e instanceof MessageEvent&&"frameEthProviderEvent"===e.data.type){const t=e.data;qc.emit(t.event,...t.params)}}),window.addEventListener("message",e=>{if(e instanceof MessageEvent&&"frameEvent"===e.data.type){const t=e.data.event;"eip6963:announceProvider"===t.event&&Wc({info:t.info,provider:Vc})}})),new TextEncoder;const Hc=new TextDecoder,Jc=e=>{let t=e;t instanceof Uint8Array&&(t=Hc.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(e=>{const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Gc extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}Gc.code="ERR_JOSE_GENERIC";(class extends Gc{constructor(e,t,n="unspecified",r="unspecified"){super(e,{cause:{claim:n,reason:r,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=r,this.payload=t}}).code="ERR_JWT_CLAIM_VALIDATION_FAILED";(class extends Gc{constructor(e,t,n="unspecified",r="unspecified"){super(e,{cause:{claim:n,reason:r,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=r,this.payload=t}}).code="ERR_JWT_EXPIRED";(class extends Gc{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}).code="ERR_JOSE_ALG_NOT_ALLOWED";(class extends Gc{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}).code="ERR_JOSE_NOT_SUPPORTED";(class extends Gc{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}).code="ERR_JWE_DECRYPTION_FAILED";(class extends Gc{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}).code="ERR_JWE_INVALID";(class extends Gc{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}).code="ERR_JWS_INVALID";class Yc extends Gc{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}Yc.code="ERR_JWT_INVALID";(class extends Gc{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}).code="ERR_JWK_INVALID";(class extends Gc{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}).code="ERR_JWKS_INVALID";(class extends Gc{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}).code="ERR_JWKS_NO_MATCHING_KEY";(class extends Gc{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}).code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";(class extends Gc{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}).code="ERR_JWKS_TIMEOUT";function Xc(e){if("string"!=typeof e)throw new Yc("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(5===n)throw new Yc("Only JWTs using Compact JWS serialization can be decoded");if(3!==n)throw new Yc("Invalid JWT");if(!t)throw new Yc("JWTs must contain a payload");let r,i;try{r=Jc(t)}catch{throw new Yc("Failed to base64url decode the payload")}try{i=JSON.parse(Hc.decode(r))}catch{throw new Yc("Failed to parse the decoded payload as JSON")}if(!function(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}(i))throw new Yc("Invalid JWT Claims Set");return i}(class extends Gc{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}).code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";class Qc extends Error{constructor(e,t={}){const n=(()=>{if(t.cause instanceof Qc){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&"string"==typeof t.cause.details?t.cause.details:t.cause?.message?t.cause.message:t.details})();super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...n?["",n?`Details: ${n}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),this.name="BaseError",this.cause=t.cause,this.details=n,this.shortMessage=e}}class el extends Qc{constructor({status:e}){super(`Request failed with status ${e}`),this.name="RequestFailedError"}}class tl extends Qc{constructor(e){super(e),this.name="InvalidToken"}}function nl(e={}){const t=function(e={}){return{origin:e.origin??"https://auth.farcaster.xyz"}}(e);return{generateNonce:()=>async function({origin:e}){const t=await fetch(`${e}/nonce`,{method:"POST"});if(!t.ok)throw new el({status:t.status});return await t.json()}(t),verifySiwf:e=>async function({origin:e},t){const n=await fetch(`${e}/verify-siwf`,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)});if(!n.ok)throw new el({status:n.status});const r=await n.json();if(!1===r.valid)throw new tl(r.message??"unknown");return{token:r.token}}(t,e)}}const rl=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,il=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;const sl=(()=>{let e,t;async function n(t){const n=nl({origin:t.quickAuthServerOrigin}),{nonce:r}=await n.generateNonce(),i=await Zc.signIn({nonce:r,acceptAuthAddress:!0});if(i.result){const t=function(e){const{scheme:t,statement:n,...r}=e.match(rl)?.groups??{},{chainId:i,expirationTime:s,issuedAt:o,notBefore:a,requestId:u,...c}=e.match(il)?.groups??{},l=e.split("Resources:")[1]?.split("\n- ").slice(1);return{...r,...c,...i?{chainId:Number(i)}:{},...s?{expirationTime:new Date(s)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...u?{requestId:u}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}(i.result.message);if(!t.domain)throw new Error("Missing domain on SIWE message");const r=await n.verifySiwf({domain:t.domain,message:i.result.message,signature:i.result.signature});return e={token:r.token,payload:(o=r.token,Xc(o))},r}var o;if("rejected_by_user"===i.error.type)throw new s;throw new Error("Unreachable")}return{get token(){if(e&&new Date(1e3*e.payload.exp)>new Date(Date.now()+15e3))return e.token},async getToken(r={}){const i=r.force??!1;return e&&!i&&new Date(1e3*e.payload.exp)>new Date(Date.now()+15e3)?{token:e.token}:(t||(t=n(r)),t.finally(()=>{t=void 0}),t)},async fetch(e,t){const{token:n}=await this.getToken(),r=new Headers(t?.headers);return r.set("Authorization",`Bearer ${n}`),fetch(e,{...t,headers:r})}}})();const ol=function(){const e=new sa;return{get eventNames(){return e.eventNames.bind(e)},get listenerCount(){return e.listenerCount.bind(e)},get listeners(){return e.listeners.bind(e)},addListener:e.addListener.bind(e),emit:e.emit.bind(e),off:e.off.bind(e),on:e.on.bind(e),once:e.once.bind(e),removeAllListeners:e.removeAllListeners.bind(e),removeListener:e.removeListener.bind(e)}}(),{solanaProviderRequest:al}=Zc;let ul;var cl,ll;async function dl(){let e;try{e=await Zc.getCapabilities()}catch{}if(e?.includes("wallet.getSolanaProvider"))return ul}al&&(ll=al,ul={request:cl=async e=>{if("connect"===e.method)return await ll(e);if("signMessage"===e.method)return await ll(e);if("signAndSendTransaction"===e.method){const{transaction:t}=e.params,n={transaction:Yu(t)};return await ll({method:"signAndSendTransaction",params:n})}if("signTransaction"===e.method){const{transaction:t}=e.params,n={transaction:Yu(t)},{signedTransaction:r}=await ll({method:"signTransaction",params:n});return{signedTransaction:Xu(r)}}},signMessage:e=>cl({method:"signMessage",params:{message:e}}),signTransaction:e=>cl({method:"signTransaction",params:{transaction:e}}),signAndSendTransaction:e=>cl({method:"signAndSendTransaction",params:e})});let hl=null;const fl=async()=>{const e=await Zc.addFrame();if(e.result)return e.result;if("invalid_domain_manifest"===e.error.type)throw new r;if("rejected_by_user"===e.error.type)throw new i;throw new Error("Unreachable")},pl={...ol,getCapabilities:Zc.getCapabilities,getChains:Zc.getChains,isInMiniApp:async function(e=1e3){if(!0===hl)return!0;if("undefined"==typeof window)return!1;if(!window.ReactNativeWebView&&window===window.parent)return!1;const t=await Promise.race([Zc.context.then(e=>!!e),new Promise(t=>{setTimeout(()=>t(!1),e)})]).catch(()=>!1);return t&&(hl=!0),t},context:Zc.context,back:(({miniAppHost:e,emitter:t})=>{let n,r=null;return{visible:!1,get onback(){return r},set onback(e){r&&t.removeListener("backNavigationTriggered",r),r=e,e&&t.addListener("backNavigationTriggered",e)},async show(){await e.updateBackState({visible:!0}),this.visible=!0},async hide(){await e.updateBackState({visible:!1}),this.visible=!1},async enableWebNavigation(){n=function({emitter:e,back:t}){const n=function(){if("undefined"!=typeof window&&void 0!==window.navigation)return window.navigation}();if(n)return function({emitter:e,back:t,navigation:n}){function r(){n.canGoBack?t.show():t.hide()}function i(){t.visible&&n.canGoBack&&n.back()}return n.addEventListener("navigatesuccess",r),e.addListener("backNavigationTriggered",i),()=>{n.removeEventListener("navigatesuccess",r),e.removeListener("backNavigationTriggered",i)}}({emitter:e,back:t,navigation:n});if("undefined"!=typeof window)return function({emitter:e,back:t,window:n}){function r(){t.visible&&n.history.back()}return t.show(),e.addListener("backNavigationTriggered",r),()=>{e.removeListener("backNavigationTriggered",r)}}({emitter:e,back:t,window:window})}({back:this,emitter:t})},async disableWebNavigation(){n?.(),n=void 0}}})({miniAppHost:Zc,emitter:ol}),quickAuth:sl,actions:{setPrimaryButton:Zc.setPrimaryButton.bind(Zc),ready:async(e={})=>await Zc.ready(e),close:Zc.close.bind(Zc),viewCast:Zc.viewCast.bind(Zc),viewProfile:Zc.viewProfile.bind(Zc),openMiniApp:Zc.openMiniApp.bind(Zc),signIn:async e=>{const t=await Zc.signIn(e);if(t.result)return t.result;if("rejected_by_user"===t.error.type)throw new s;throw new Error("Unreachable")},openUrl:e=>{const t="string"==typeof e?e:e.url;return Zc.openUrl(t.trim())},addFrame:fl,addMiniApp:fl,composeCast:(e={})=>Zc.composeCast(e),viewToken:Zc.viewToken.bind(Zc),sendToken:Zc.sendToken.bind(Zc),swapToken:Zc.swapToken.bind(Zc),requestCameraAndMicrophoneAccess:Zc.requestCameraAndMicrophoneAccess.bind(Zc)},experimental:{getSolanaProvider:dl,signManifest:async e=>{const t=await Zc.signManifest(e);if(t.result)return t.result;if("rejected_by_user"===t.error.type)throw new o;if("invalid_domain"===t.error.type)throw new a;if("generic_error"===t.error.type)throw new u(t.error.message);throw new Error("Unreachable")},quickAuth:e=>sl.getToken(e)},wallet:{ethProvider:Vc,getEthereumProvider:async function(){try{const e=await Zc.getCapabilities();if(!e.includes("wallet.getEthereumProvider")&&!e.includes("wallet.getEvmProvider"))return;return Vc}catch{return Vc}},getSolanaProvider:dl},haptics:{impactOccurred:Zc.impactOccurred.bind(Zc),notificationOccurred:Zc.notificationOccurred.bind(Zc),selectionChanged:Zc.selectionChanged.bind(Zc)}};"undefined"!=typeof document&&document.addEventListener("FarcasterFrameEvent",e=>{if(e instanceof MessageEvent){const t=e.data;"primary_button_clicked"===t.event?ol.emit("primaryButtonClicked"):"miniapp_added"===t.event?ol.emit("miniAppAdded",{notificationDetails:t.notificationDetails}):"miniapp_add_rejected"===t.event?ol.emit("miniAppAddRejected",{reason:t.reason}):"miniapp_removed"===t.event?ol.emit("miniAppRemoved"):"notifications_enabled"===t.event?ol.emit("notificationsEnabled",{notificationDetails:t.notificationDetails}):"notifications_disabled"===t.event?ol.emit("notificationsDisabled"):"back_navigation_triggered"===t.event&&ol.emit("backNavigationTriggered")}}),"undefined"!=typeof window&&window.addEventListener("message",e=>{if(e instanceof MessageEvent&&"frameEvent"===e.data.type){const t=e.data.event;"primary_button_clicked"===t.event?ol.emit("primaryButtonClicked"):"miniapp_added"===t.event?ol.emit("miniAppAdded",{notificationDetails:t.notificationDetails}):"miniapp_add_rejected"===t.event?ol.emit("miniAppAddRejected",{reason:t.reason}):"miniapp_removed"===t.event?ol.emit("miniAppRemoved"):"notifications_enabled"===t.event?ol.emit("notificationsEnabled",{notificationDetails:t.notificationDetails}):"notifications_disabled"===t.event?ol.emit("notificationsDisabled"):"back_navigation_triggered"===t.event&&ol.emit("backNavigationTriggered")}});const ml="0xC647421C5Dc78D1c3960faA7A33f9aEFDF4B7B07",gl=[{id:"arbme-weth",displayName:"ARBME / WETH",priority:1,token0Address:ml,token1Address:"0x4200000000000000000000000000000000000006"},{id:"clanker-arbme",displayName:"CLANKER / ARBME",priority:2,token0Address:"0x1bc0c42215582d5a085795f4badbac3ff36d1bcb",token1Address:ml}],yl="https://arbme.epicdylan.com",vl="/",wl="/positions",bl="/position",_l=[];function xl(e,t){const n=new RegExp("^"+e.replace(/:(\w+)/g,"(?<$1>[^/]+)")+"$");_l.push({pattern:n,handler:t})}function El(){const e=window.location.hash.slice(1)||vl,t=document.getElementById("app");if(t){for(const{pattern:n,handler:r}of _l){const i=e.match(n);if(i){const e=i.groups||{};return void(t.innerHTML=r(e))}}t.innerHTML=`\n    <div class="error-page">\n      <h1>404</h1>\n      <p>Page not found</p>\n      <a href="#${vl}">Go Home</a>\n    </div>\n  `}else console.error("App container not found")}const kl=new class{constructor(){t(this,"state",{wallet:null,pools:[],positions:[],globalStats:null,loading:!1,error:null}),t(this,"subscribers",new Set)}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}setState(e){this.state={...this.state,...e},this.notify()}getState(){return this.state}notify(){this.subscribers.forEach(e=>e())}};function Al(){document.addEventListener("click",e=>{const t=e.target;if(("buy-arbme-btn"===t.id||t.closest("#buy-arbme-btn"))&&(e.preventDefault(),async function(){try{console.log("[Actions] Opening buy widget for ARBME...");const e=`eip155:8453/erc20:${ml}`,t=await pl.actions.swapToken({buyToken:e});t.success?console.log("[Actions] Swap completed:",t.swap.transactions):console.log("[Actions] Swap cancelled or failed:",t.reason)}catch(e){console.error("[Actions] Error opening buy widget:",e)}}()),("tip-jar-btn"===t.id||t.closest("#tip-jar-btn"))&&(e.preventDefault(),async function(e="1"){try{console.log(`[Actions] Sending ${e} ARBME tip...`);const t=`eip155:8453/erc20:${ml}`,n=(1e18*parseFloat(e)).toString(),r=await pl.actions.sendToken({token:t,amount:n,recipientAddress:"0x2C421b1c21bB88F1418cC525934E62F2c48C19df"});r.success?console.log("[Actions] Tip sent:",r.send.transaction):console.log("[Actions] Tip cancelled or failed:",r.reason)}catch(t){console.error("[Actions] Error sending tip:",t)}}("1")),"prev-page-btn"===t.id||t.closest("#prev-page-btn")){e.preventDefault();const t=new CustomEvent("changePage",{detail:{direction:"prev"}});window.dispatchEvent(t)}if("next-page-btn"===t.id||t.closest("#next-page-btn")){e.preventDefault();const t=new CustomEvent("changePage",{detail:{direction:"next"}});window.dispatchEvent(t)}if(t.classList.contains("collect-fees-btn")){e.preventDefault();const n=t.getAttribute("data-position-id");n&&async function(e){try{console.log(`[Actions] Collecting fees for position ${e}...`),alert("Fee collection coming soon! V4 position fees will be collectable via Farcaster SDK.")}catch(t){console.error("[Actions] Error collecting fees:",t)}}(n)}})}function Sl(e){return e>=1e6?`$${(e/1e6).toFixed(2)}M`:e>=1e3?`$${(e/1e3).toFixed(2)}K`:e>=1?`$${e.toFixed(2)}`:`$${e.toFixed(4)}`}function Ml(e){const t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"":t>=1?`$${t.toFixed(4)}`:t>=1e-4?`$${t.toFixed(6)}`:t>=1e-8?`$${t.toFixed(10)}`:`$${t.toFixed(12)}`}function Il(){const{globalStats:e}=kl.getState();return`\n    <header class="app-header">\n      <div class="app-header-top">\n        <div class="app-logo">\n          <img src="/arbie.png" alt="ArbMe" class="logo-image" />\n          <div>\n            <h1>ArbMe</h1>\n            <p class="text-secondary">Permissionless Arb Routes</p>\n          </div>\n        </div>\n        <button id="tip-jar-btn" class="tip-jar-button" title="Send 1 $ARBME tip">\n          \n        </button>\n      </div>\n\n      <div class="stats-banner">\n        <div class="stat-item">\n          <span class="stat-label text-secondary">Market Cap</span>\n          <span class="stat-value text-accent">${e?function(e){const t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"":Sl(1e11*t)}(e.arbmePrice):"..."}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-label text-secondary">Total TVL</span>\n          <span class="stat-value">${e?Sl(e.totalTvl):"..."}</span>\n        </div>\n      </div>\n\n      <div class="arbme-price-display">\n        <span class="price-label text-secondary">$ARBME Price</span>\n        <span class="price-value">${e?Ml(e.arbmePrice):"..."}</span>\n        <button id="buy-arbme-btn" class="buy-arbme-btn">Buy $ARBME</button>\n      </div>\n    </header>\n  `}async function Bl(){kl.setState({loading:!0,error:null});try{const e=await async function(){const e=await fetch(`${yl}/pools`);if(!e.ok)throw new Error(`Failed to fetch pools: ${e.statusText}`);return e.json()}();kl.setState({pools:e.pools,globalStats:{arbmePrice:e.arbmePrice,totalTvl:e.totalTvl},loading:!1})}catch(e){console.error("[Home] Failed to load pools:",e),kl.setState({error:"Failed to load pools. Please try again.",loading:!1})}}function Ol(e,t){if(!e.token0||!e.token1)return!1;const n=e.token0.toLowerCase(),r=e.token1.toLowerCase(),i=t.token0Address.toLowerCase(),s=t.token1Address.toLowerCase();return n===i&&r===s||n===s&&r===i}function Rl(e){if(!e)return'\n      <div class="pool-card loading">\n        <div class="spinner"></div>\n        <p class="text-secondary">Loading pool...</p>\n      </div>\n    ';const t=e.priceChange24h>=0?"text-positive":"text-negative";return`\n    <div class="pool-card">\n      <div class="pool-header">\n        <h3>${e.pair}</h3>\n        <span class="pool-dex text-secondary">${e.dex}</span>\n      </div>\n\n      <div class="pool-price">\n        <span class="price-value">${Ml(e.priceUsd)}</span>\n        <span class="price-change ${t}">${n=e.priceChange24h,`${n>=0?"+":""}${n.toFixed(2)}%`}</span>\n      </div>\n\n      <div class="pool-stats">\n        <div class="stat">\n          <span class="stat-label text-secondary">TVL</span>\n          <span class="stat-value">${Sl(e.tvl)}</span>\n        </div>\n        <div class="stat">\n          <span class="stat-label text-secondary">24h Volume</span>\n          <span class="stat-value">${Sl(e.volume24h)}</span>\n        </div>\n      </div>\n\n      <a href="${e.url}" target="_blank" class="pool-link">\n        View on DexScreener \n      </a>\n    </div>\n  `;var n}function Tl(e){const{loading:t,error:n}=kl.getState();t||0!==kl.getState().pools.length||Bl();const r=function(){const{pools:e}=kl.getState(),t=[];for(const n of gl){const r=e.find(e=>Ol(e,n));r&&t.push(r)}return t.sort((e,t)=>{const n=gl.find(t=>Ol(e,t)),r=gl.find(e=>Ol(t,e));return(n?.priority||999)-(r?.priority||999)})}(),i=r.length>0?r.map(e=>Rl(e)).join(""):gl.map(()=>Rl(null)).join("");return`\n    <div class="home-page">\n      ${Il()}\n\n      ${n?`<div class="error-banner">${n}</div>`:""}\n\n      <div class="pools-grid">\n        ${i}\n      </div>\n\n      ${kl.getState().wallet?`\n        <div class="home-actions">\n          <a href="#${wl}" class="button-secondary">View My Positions</a>\n        </div>\n      `:""}\n    </div>\n  `}async function Ll(){const{wallet:e}=kl.getState();if(console.log("[MyPools] loadPositions called, wallet:",e),!e)return console.log("[MyPools] No wallet connected"),void kl.setState({error:"Wallet not connected"});console.log("[MyPools] Fetching positions for wallet:",e),kl.setState({loading:!0,error:null});try{const t=await async function(e){const t=await fetch(`${yl}/api/positions?wallet=${e}`);if(!t.ok)throw new Error(`Failed to fetch positions: ${t.statusText}`);return t.json()}(e);console.log("[MyPools] Received positions:",t),kl.setState({positions:t,loading:!1})}catch(t){console.error("[MyPools] Failed to load positions:",t),kl.setState({error:"Failed to load positions. Please try again.",loading:!1})}}let Pl=1;function Ul(e){const{wallet:t,positions:n,loading:r,error:i}=kl.getState();console.log("[MyPools] Rendering page, wallet:",t,"positions:",n.length,"loading:",r),t&&!r&&0===n.length&&(console.log("[MyPools] Triggering loadPositions..."),Ll());const s=Math.ceil(n.length/10),o=10*(Pl-1),a=o+10,u=n.slice(o,a);return t?`\n    <div class="my-pools-page">\n      ${Il()}\n\n      <div class="page-subheader">\n        <a href="#${vl}" class="back-button"> Back</a>\n        <h2>My Positions</h2>\n      </div>\n\n      <div class="wallet-info">\n        <span class="text-secondary">Connected:</span>\n        <code>${c=t,!c||c.length<10?c:`${c.slice(0,6)}...${c.slice(-4)}`}</code>\n      </div>\n\n      ${i?`<div class="error-banner">${i}</div>`:""}\n\n      ${r?'\n        <div class="loading-state">\n          <div class="spinner"></div>\n          <p class="text-secondary">Loading positions...</p>\n        </div>\n      ':""}\n\n      ${r||0!==n.length?"":`\n        <div class="empty-state">\n          <p class="text-secondary">No positions found</p>\n          <p class="text-muted">Add liquidity to get started</p>\n          <a href="#${vl}" class="button-secondary">Explore Pools</a>\n        </div>\n      `}\n\n      ${!r&&n.length>0?`\n        <div class="positions-header">\n          <p class="text-secondary">${n.length} position${1!==n.length?"s":""} found</p>\n        </div>\n        <div class="positions-list">\n          ${u.map((e,t)=>function(e,t){const n=void 0!==e.inRange?e.inRange?'<span class="badge badge-success">In Range</span>':'<span class="badge badge-warning">Out of Range</span>':"";return`\n    <div class="position-card-container">\n      <a href="#${bl}/${e.id}" class="position-card">\n        <div class="position-header">\n          <h3>${e.pair}</h3>\n          <span class="position-version text-secondary">${e.version}</span>\n        </div>\n\n        <div class="position-stats">\n          <div class="stat">\n            <span class="stat-label text-secondary">Liquidity</span>\n            <span class="stat-value">${Sl(e.liquidityUsd)}</span>\n          </div>\n          <div class="stat">\n            <span class="stat-label text-secondary">Uncollected Fees</span>\n            <span class="stat-value text-positive">${Sl(e.feesEarnedUsd)}</span>\n          </div>\n        </div>\n\n        ${n}\n\n        <div class="position-arrow"></div>\n      </a>\n      <button\n        class="collect-fees-btn"\n        data-position-id="${e.id}"\n        data-position-index="${t}"\n        ${0===e.feesEarnedUsd?"disabled":""}\n      >\n        Collect Fees\n      </button>\n    </div>\n  `}(e,o+t)).join("")}\n        </div>\n        ${s>1?`\n          <div class="pagination">\n            <button\n              id="prev-page-btn"\n              class="pagination-btn"\n              ${1===Pl?"disabled":""}\n            > Previous</button>\n            <span class="pagination-info">Page ${Pl} of ${s}</span>\n            <button\n              id="next-page-btn"\n              class="pagination-btn"\n              ${Pl===s?"disabled":""}\n            >Next </button>\n          </div>\n        `:""}\n      `:""}\n    </div>\n  `:`\n      <div class="my-pools-page">\n        ${Il()}\n\n        <div class="page-subheader">\n          <a href="#${vl}" class="back-button"> Back</a>\n          <h2>My Positions</h2>\n        </div>\n\n        <div class="empty-state">\n          <p class="text-secondary">Wallet not connected</p>\n          <p class="text-muted">Connect your Farcaster wallet to view positions</p>\n        </div>\n      </div>\n    `;var c}"undefined"!=typeof window&&window.addEventListener("changePage",e=>{const t=e.detail?.direction;if("prev"===t&&Pl>1)Pl--,kl.setState({});else if("next"===t){const{positions:e}=kl.getState(),t=Math.ceil(e.length/10);Pl<t&&(Pl++,kl.setState({}))}});let Cl=null,Nl=!1;async function jl(e){Nl=!0,kl.setState({error:null});try{Cl=await async function(e){const t=await fetch(`${yl}/api/position/${e}`);if(!t.ok)throw new Error(`Failed to fetch position: ${t.statusText}`);return t.json()}(e),Nl=!1;const t=document.getElementById("app");t&&(t.innerHTML=zl({id:e}))}catch(t){console.error("[PositionDetail] Failed to load position:",t),Nl=!1,kl.setState({error:"Failed to load position. Please try again."})}}function zl(e){const t=e.id,{error:n}=kl.getState();if(!t)return`\n      <div class="position-detail-page">\n        <header class="page-header">\n          <a href="#${wl}" class="back-button"> Back</a>\n          <h1>Position Details</h1>\n        </header>\n        <div class="error-banner">Invalid position ID</div>\n      </div>\n    `;if(Cl||Nl||jl(t),Nl||!Cl)return`\n      <div class="position-detail-page">\n        <header class="page-header">\n          <a href="#${wl}" class="back-button"> Back</a>\n          <h1>Position Details</h1>\n        </header>\n\n        <div class="loading-state">\n          <div class="spinner"></div>\n          <p class="text-secondary">Loading position...</p>\n        </div>\n      </div>\n    `;const r=Cl,i=void 0!==r.inRange?r.inRange?'<span class="badge badge-success"> In Range</span>':'<span class="badge badge-warning"> Out of Range</span>':"";return`\n    <div class="position-detail-page">\n      <header class="page-header">\n        <a href="#${wl}" class="back-button"> Back</a>\n        <h1>Position #${t.slice(0,8)}</h1>\n      </header>\n\n      ${n?`<div class="error-banner">${n}</div>`:""}\n\n      <div class="position-detail-card">\n        <div class="detail-header">\n          <h2>${r.pair}</h2>\n          <span class="position-version text-secondary">${r.version}</span>\n        </div>\n\n        <div class="detail-section">\n          <h3>Value</h3>\n          <div class="detail-stats">\n            <div class="stat-large">\n              <span class="stat-label text-secondary">Your Liquidity</span>\n              <span class="stat-value">${Sl(r.liquidityUsd)}</span>\n            </div>\n            <div class="stat-large">\n              <span class="stat-label text-secondary">Uncollected Fees</span>\n              <span class="stat-value text-positive">${Sl(r.feesEarnedUsd)}</span>\n            </div>\n          </div>\n        </div>\n\n        <div class="detail-section">\n          <h3>Position Details</h3>\n          <div class="detail-list">\n            <div class="detail-item">\n              <span class="text-secondary">Liquidity</span>\n              <span>${s=parseFloat(r.liquidity),s.toLocaleString("en-US",{maximumFractionDigits:2})}</span>\n            </div>\n          </div>\n        </div>\n\n        ${r.priceRangeLow&&r.priceRangeHigh?`\n          <div class="detail-section">\n            <h3>Price Range</h3>\n            <div class="detail-list">\n              <div class="detail-item">\n                <span class="text-secondary">Min Price</span>\n                <span>${r.priceRangeLow}</span>\n              </div>\n              <div class="detail-item">\n                <span class="text-secondary">Max Price</span>\n                <span>${r.priceRangeHigh}</span>\n              </div>\n              <div class="detail-item">\n                <span class="text-secondary">Status</span>\n                ${i}\n              </div>\n            </div>\n          </div>\n        `:""}\n\n        <div class="detail-actions">\n          <button disabled class="button-secondary">Add Liquidity (Coming Soon)</button>\n          <button disabled class="button-secondary">Remove Liquidity (Coming Soon)</button>\n          <button disabled class="button-secondary">Collect Fees (Coming Soon)</button>\n        </div>\n      </div>\n    </div>\n  `;var s}!async function(){console.log("[ArbMe] Initializing miniapp...");try{await pl.actions.ready(),console.log("[ArbMe] SDK ready signal sent");const e=await async function(){try{console.log("[Wallet] Getting Ethereum provider...");const t=await pl.wallet.getEthereumProvider();if(!t)return console.log("[Wallet] No Ethereum provider available"),null;console.log("[Wallet] Provider available, requesting accounts...");let n=[];try{if(n=await t.request({method:"eth_accounts"}),n&&n.length>0)return console.log("[Wallet] Account found via eth_accounts:",n[0]),n[0]}catch(e){console.log("[Wallet] eth_accounts failed:",e)}try{if(n=await t.request({method:"eth_requestAccounts"}),n&&n.length>0)return console.log("[Wallet] Account found via eth_requestAccounts:",n[0]),n[0]}catch(e){console.log("[Wallet] eth_requestAccounts failed:",e)}return console.log("[Wallet] No accounts available"),null}catch(t){return console.error("[Wallet] Error getting wallet:",t),null}}();e?(console.log("[ArbMe] Wallet connected:",e),kl.setState({wallet:e})):console.log("[ArbMe] No wallet found"),xl(vl,Tl),xl(wl,Ul),xl(`${bl}/:id`,zl),kl.subscribe(()=>{El()}),window.addEventListener("hashchange",El),El(),Al(),console.log("[ArbMe] Initialization complete")}catch(e){console.error("[ArbMe] Initialization error:",e);const t=document.getElementById("app");t&&(t.innerHTML='\n        <div class="error-page">\n          <h1>Error</h1>\n          <p>Failed to initialize app. Please reload.</p>\n        </div>\n      ')}}();
//# sourceMappingURL=index-aZQrL0rp.js.map
